<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>MediCare</title>
        <link rel="icon" type="image/png" href="favicon.png" />
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
        <style>
            .flatpickr-calendar {
                border-radius: 16px !important;
                box-shadow: 0 2px 16px rgba(0, 0, 0, 0.08) !important;
                border: none !important;
                width: 320px !important;
                background: #fff !important;
                font-family: "Segoe UI", Arial, sans-serif;

                z-index: 9999 !important;
                left: auto !important;
                right: 0 !important;

                top: 100% !important;
                margin-top: 24px !important;
            }

            .flatpickr-months {
                background: #fff !important;
                color: #222 !important;
                border-radius: 16px 16px 0 0 !important;
                padding: 12px 0 0 0 !important;
                margin-bottom: 0 !important;
            }

            .flatpickr-current-month {
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 1.3em !important;
                font-weight: 700 !important;
                color: #222 !important;
                height: 40px !important;
                margin-bottom: 0 !important;
            }

            .flatpickr-current-month .flatpickr-monthDropdown-months,
            .flatpickr-current-month .numInputWrapper {
                color: #222 !important;
                font-weight: 700 !important;
            }

            .flatpickr-day {
                color: #222 !important;
                font-weight: 500 !important;
                background: transparent !important;
                border-radius: 50% !important;
                border: none !important;
                transition:
                    background 0.2s,
                    color 0.2s;
                margin: 2px 0 !important;
            }

            .flatpickr-day.selected,
            .flatpickr-day.today {
                background: #1677ff !important;
                color: #fff !important;
                border-radius: 50% !important;
            }

            .flatpickr-day:hover,
            .flatpickr-day:focus {
                background: #e6f0ff !important;
                color: #1677ff !important;
            }

            .flatpickr-weekdays {
                background: #fff !important;
                color: #bdbdbd !important;
                font-weight: 600 !important;
                border: none !important;
            }

            .flatpickr-weekday {
                color: #bdbdbd !important;
                font-weight: 600 !important;
                border: none !important;
            }

            .flatpickr-day.disabled,
            .flatpickr-day.nextMonthDay,
            .flatpickr-day.prevMonthDay {
                color: #e0e0e0 !important;
                background: transparent !important;
                cursor: not-allowed !important;
            }

            .flatpickr-months .flatpickr-prev-month,
            .flatpickr-months .flatpickr-next-month {
                color: #bdbdbd !important;
                fill: #bdbdbd !important;
                top: 16px !important;
            }

            .flatpickr-day.today:not(.selected) {
                background: #f3f4f6 !important;
                color: #222 !important;
                border-radius: 50% !important;
                border: none !important;
            }

            .flatpickr-current-month .numInputWrapper,
            .flatpickr-current-month .flatpickr-year {
                display: none !important;
            }

            .flatpickr-current-month {
                justify-content: center !important;
            }
            body.dark {
                background-color: #0f172a;
                color: #f1f5f9;
            }

            /* body.dark * {
    color: #f1f5f9 !important;
}  */

            body.dark :where(h1, h2, h3, h4, h5, h6, p, div, span, li, th, td, label, a, button, strong, em, small) {
                color: #f1f5f9 !important;
            }

            body.dark svg,
            body.dark svg * {
                color: initial !important;
                color: #f1f5f9 !important;
            }

            body.dark #logoutModal svg {
                color: #ef4444 !important;
                stroke: #ef4444 !important;
            }

            body.dark #deleteAdminModal svg {
                color: #ef4444 !important;
                stroke: #ef4444 !important;
            }

            body.dark #deleteDoctorModal svg {
                color: #ef4444 !important;
                stroke: #ef4444 !important;
            }

            body.dark .text-gray-500,
            body.dark .text-gray-400,
            body.dark p,
            body.dark span {
                color: #94a3b8 !important;
            }

            body.dark a,
            body.dark button {
                color: #fbfbfb !important;
            }

            body.dark .bg-white,
            body.dark .card,
            body.dark .p-6,
            body.dark .rounded-lg,
            body.dark .rounded-xl,
            body.dark .shadow {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }

            body.dark .tab-active {
                background-color: #1e293b !important;
                color: white !important;
            }
            body.dark .tab-inactive {
                color: #cbd5e1 !important;
            }
            body.dark .tab-inactive:hover {
                background-color: rgba(255, 255, 255, 0.1) !important;
            }

            body.dark input,
            body.dark select {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }
            body.dark input::placeholder {
                color: #94a3b8 !important;
            }

            body.dark .flatpickr-calendar {
                background: #0f172a !important;
                color: #cbd5e1 !important;
            }
            body.dark .flatpickr-innerContainer {
                background: #0f172a !important;
            }
            body.dark .flatpickr-weekdays {
                background: #0f172a !important;
                color: #cbd5e1 !important;
            }

            body.dark .flatpickr-months {
                background: #ffffff00 !important;
                color: #111827 !important;
            }
            body.dark .flatpickr-months .flatpickr-prev-month,
            body.dark .flatpickr-months .flatpickr-next-month {
                fill: #111827 !important;
                color: #111827 !important;
            }

            body.dark .flatpickr-current-month .flatpickr-monthDropdown-months {
                background-color: #111827 !important;
                color: #111827 !important;
            }
            body.dark .flatpickr-current-month .numInputWrapper input {
                background-color: #ffffff !important;
                color: #111827 !important;
            }
            body.dark .flatpickr-current-month .numInputWrapper span {
                color: #111827 !important;
            }
            body.dark .flatpickr-current-month,
            body.dark .flatpickr-current-month .flatpickr-monthDropdown-months,
            body.dark .flatpickr-current-month .numInputWrapper {
                color: #ffffff !important;
            }
            body.dark .flatpickr-days {
                background: #0f172a !important;
            }
            body.dark .flatpickr-day {
                color: #e2e8f0 !important;
            }
            body.dark .flatpickr-day.selected,
            body.dark .flatpickr-day.today {
                background: #3b82f6 !important;
                color: white !important;
            }
            body.dark .flatpickr-day:hover {
                background: #334155 !important;
            }

            body.dark #appointmentsTab h3,
            body.dark #patientsTab h3 {
                color: #e5e7eb !important;
            }
            body.dark #appointmentsTab p.text-gray-500,
            body.dark #patientsTab p.text-gray-500 {
                color: #94a3b8 !important;
            }

            body.dark table thead th {
                background-color: #1e293b !important;
            }
            body.dark table tbody td {
                background-color: #0f172a !important;
            }
            body.dark table tbody tr:nth-child(even) td {
                background-color: #162032 !important;
            }

            body.dark .grid.grid-cols-12.px-4.py-3.text-left.text-sm.font-bold.bg-gray-50.text-gray-800.border-b,
            body.dark #patientsHeader {
                background-color: #0f172a !important;
                color: #e5e7eb !important;
                border-color: #334155 !important;
            }
            body.dark .grid.grid-cols-12.px-4.py-3.text-left.text-sm.font-bold.bg-gray-50.text-gray-800.border-b > div,
            body.dark #patientsHeader > div {
                color: #e5e7eb !important;
            }

            body.dark #appointmentsTab thead tr {
                background-color: #0f172a !important;
            }
            body.dark #appointmentsTab thead th {
                color: #e5e7eb !important;
                border-color: #334155 !important;
            }

            body.dark #doctorsTab .bg-gray-50.text-gray-800.border-b {
                background-color: #0f172a !important;
                color: #e5e7eb !important;
                border-color: #334155 !important;
            }
            body.dark #doctorsTab .bg-gray-50.text-gray-800.border-b > div {
                color: #e5e7eb !important;
            }

            body.dark #userDropdownMenu {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }
            body.dark #userDropdownMenu a:hover,
            body.dark #userDropdownMenu button:hover {
                background-color: #334155 !important;
            }

            body.dark .w-10.h-10 {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }
            body.dark .text-gray-400 {
                color: #cbd5e1 !important;
            }

            body.dark .text-gray-400 {
                color: #cbd5e1 !important;
            }

            body.dark nav {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }

            body.dark nav h1 {
                color: #3b82f6 !important;
            }

            body.dark nav svg {
                color: #3b82f6 !important;
            }

            body.dark button.bg-black {
                background-color: #3b82f6 !important;
                color: white !important;
            }

            body.dark button.bg-black:hover {
                background-color: #2563eb !important;
            }

            body.dark button.bg-blue-600 {
                background-color: #3b82f6 !important;
                color: white !important;
            }

            body.dark button.bg-blue-600:hover {
                background-color: #2563eb !important;
            }

            body.dark button.bg-red-600 {
                background-color: #dc2626 !important;
                color: white !important;
            }

            body.dark button.bg-red-600:hover {
                background-color: #b91c1c !important;
            }

            body.dark table tbody tr:hover td {
                background-color: #1e293b !important;
            }

            body.dark .bg-green-200 {
                background-color: #065f46 !important;
                color: #6ee7b7 !important;
            }

            body.dark .bg-yellow-200 {
                background-color: #92400e !important;
                color: #fcd34d !important;
            }

            body.dark .bg-red-200 {
                background-color: #991b1b !important;
                color: #fca5a5 !important;
            }

            body.dark .doctor-row {
                background-color: #1e293b !important;
                color: #f1f5f9 !important;
                border-color: #334155 !important;
            }

            body.dark .doctor-row:hover {
                background-color: #334155 !important;
                transform: translateY(-1px);
                box-shadow:
                    0 4px 6px -1px rgba(0, 0, 0, 0.3),
                    0 2px 4px -1px rgba(0, 0, 0, 0.2) !important;
            }

            body.dark .grid.grid-cols-12.gap-4.items-center.bg-white.p-3.rounded-lg.shadow-sm.border.border-gray-100 {
                background-color: #1e293b !important;
                border-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark .grid.grid-cols-12.gap-4.items-center.bg-white.p-3.rounded-lg.shadow-sm.border.border-gray-100:hover {
                background-color: #334155 !important;
                box-shadow:
                    0 4px 6px -1px rgba(0, 0, 0, 0.3),
                    0 2px 4px -1px rgba(0, 0, 0, 0.2) !important;
            }

            body.dark #searchInput {
                background-color: #0f172a !important;
                border-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark #datePickerDisplay {
                background-color: #0f172a !important;
                border-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark .px-3.py-1.text-sm.border.border-gray-300.rounded {
                background-color: #1e293b !important;
                border-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark .px-3.py-1.text-sm.border.border-gray-300.rounded:hover {
                background-color: #3b82f6 !important;
                border-color: #3b82f6 !important;
                color: white !important;
            }

            body.dark .px-3.py-1.text-sm.border.border-gray-300.rounded:disabled {
                background-color: #475569 !important;
                border-color: #475569 !important;
                color: #64748b !important;
            }

            body.dark .modal,
/* body.dark #viewDetailsModal,
body.dark #appointmentDetailsModal,
body.dark #rescheduleModal,
body.dark #cancelModal, */
body.dark #addDoctorModal,
body.dark #patientDetailsModal,
body.dark #successModal,
body.dark #viewDoctorProfileModal,
body.dark #editDoctorProfileModal,
body.dark #availabilityModal {
                background-color: #1e293b !important;
                color: #f1f5f9 !important;
                border-color: #334155 !important;
            }

            body.dark .modal h2,
            body.dark .modal h3 {
                color: #f1f5f9 !important;
            }

            body.dark .action-menu {
                background-color: #1e293b !important;
                border-color: #334155 !important;
                box-shadow:
                    0 10px 15px -3px rgba(0, 0, 0, 0.3),
                    0 4px 6px -2px rgba(0, 0, 0, 0.2) !important;
            }

            body.dark .action-menu a,
            body.dark .action-menu button {
                color: #f1f5f9 !important;
            }

            body.dark .action-menu a:hover,
            body.dark .action-menu button:hover {
                background-color: #334155 !important;
            }

            body.dark .text-gray-900 {
                color: #f1f5f9 !important;
            }

            body.dark .text-gray-800 {
                color: #e2e8f0 !important;
            }

            body.dark .text-gray-700 {
                color: #cbd5e1 !important;
            }

            body.dark .text-gray-600 {
                color: #94a3b8 !important;
            }

            body.dark .bg-gray-50 {
                background-color: #0f172a !important;
            }

            body.dark .bg-gray-100 {
                background-color: #1e293b !important;
            }

            body.dark .bg-gray-200 {
                background-color: #334155 !important;
            }

            body.dark .border-gray-200 {
                border-color: #334155 !important;
            }

            body.dark .border-gray-300 {
                border-color: #475569 !important;
            }

            body.dark .shadow,
            body.dark .shadow-sm,
            body.dark .shadow-md,
            body.dark .shadow-lg {
                box-shadow:
                    0 1px 3px 0 rgba(0, 0, 0, 0.3),
                    0 1px 2px -1px rgba(0, 0, 0, 0.2) !important;
            }

            body.dark .animate-spin {
                border-color: #334155 !important;
                border-top-color: #3b82f6 !important;
            }

            body.dark #toast {
                background-color: #1e293b !important;
                border: 1px solid #334155 !important;
            }

            body.dark input:focus,
            body.dark select:focus,
            body.dark textarea:focus {
                border-color: #3b82f6 !important;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
            }

            body.dark .w-8.h-8.rounded-full.bg-gray-200 {
                background-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark #userName,
            body.dark #userDropdownToggle {
                color: #f1f5f9 !important;
            }

            body.dark #userDropdownToggle svg {
                color: #f1f5f9 !important;
            }

            body.dark #themesSubDropdown {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }

            body.dark #themesSubDropdown ul {
                color: #f1f5f9 !important;
            }

            body.dark #themesSubDropdown button {
                color: #f1f5f9 !important;
            }

            body.dark #themesSubDropdown button:hover {
                background-color: #334155 !important;
            }

            body.dark #themesDropdownToggle {
                color: #f1f5f9 !important;
            }

            body.dark #themesDropdownToggle:hover {
                background-color: #334155 !important;
            }

            .themes-dropdown-arrow.rotate-180 {
                transform: rotate(180deg);
            }

            #themesSubDropdown {
                min-width: 120px;
            }

            #themesSubDropdown button {
                text-align: left;
                width: 100%;
            }

            body.dark #accentsSubDropdown {
                background-color: #1e293b !important;
                border-color: #334155 !important;
            }

            body.dark #accentsSubDropdown ul {
                color: #f1f5f9 !important;
            }

            body.dark #accentsSubDropdown button {
                color: #f1f5f9 !important;
            }

            body.dark #accentsSubDropdown button:hover {
                background-color: #334155 !important;
            }

            body.dark #accentsDropdownToggle {
                color: #f1f5f9 !important;
            }

            body.dark #accentsDropdownToggle:hover {
                background-color: #334155 !important;
            }

            .accents-dropdown-arrow.rotate-180 {
                transform: rotate(180deg);
            }

            #accentsSubDropdown {
                min-width: 160px;
            }

            #accentsSubDropdown button {
                text-align: left;
                width: 100%;
            }

            .accent-blue .tab-active {
                background-color: #3b82f6 !important;
                color: white !important;
            }

            .accent-blue button.bg-black,
            .accent-blue button.bg-blue-600 {
                background-color: #3b82f6 !important;
                color: white !important;
            }

            .accent-blue button.bg-black:hover,
            .accent-blue button.bg-blue-600:hover {
                background-color: #2563eb !important;
            }

            .accent-blue nav h1,
            .accent-blue nav svg {
                color: #3b82f6 !important;
            }

            .accent-blue input:focus,
            .accent-blue select:focus,
            .accent-blue textarea:focus {
                border-color: #3b82f6 !important;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
            }

            .accent-green .tab-active {
                background-color: #10b981 !important;
                color: white !important;
            }

            .accent-green button.bg-black,
            .accent-green button.bg-blue-600 {
                background-color: #10b981 !important;
                color: white !important;
            }

            .accent-green button.bg-black:hover,
            .accent-green button.bg-blue-600:hover {
                background-color: #059669 !important;
            }

            .accent-green input:focus,
            .accent-green select:focus,
            .accent-green textarea:focus {
                border-color: #10b981 !important;
                box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
            }

            .accent-brown .tab-active {
                background-color: #b55656 !important;
                color: white !important;
            }

            .accent-brown button.bg-black,
            .accent-brown button.bg-blue-600 {
                background-color: #b55656 !important;
                color: white !important;
            }

            .accent-brown button.bg-black:hover,
            .accent-brown button.bg-blue-600:hover {
                background-color: #b55656 !important;
            }

            .accent-brown input:focus,
            .accent-brown select:focus,
            .accent-brown textarea:focus {
                border-color: #b55656 !important;
                box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
            }

            .accent-purple .tab-active {
                background-color: #8b5cf6 !important;
                color: white !important;
            }

            .accent-purple button.bg-black,
            .accent-purple button.bg-blue-600 {
                background-color: #8b5cf6 !important;
                color: white !important;
            }

            .accent-purple button.bg-black:hover,
            .accent-purple button.bg-blue-600:hover {
                background-color: #7c3aed !important;
            }

            .accent-purple input:focus,
            .accent-purple select:focus,
            .accent-purple textarea:focus {
                border-color: #8b5cf6 !important;
                box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1) !important;
            }

            .accent-orange .tab-active {
                background-color: #f59e0b !important;
                color: white !important;
            }

            .accent-orange button.bg-black,
            .accent-orange button.bg-blue-600 {
                background-color: #f59e0b !important;
                color: white !important;
            }

            .accent-orange button.bg-black:hover,
            .accent-orange button.bg-blue-600:hover {
                background-color: #d97706 !important;
            }

            .accent-orange input:focus,
            .accent-orange select:focus,
            .accent-orange textarea:focus {
                border-color: #f59e0b !important;
                box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
            }

            .accent-pink .tab-active {
                background-color: #ec4899 !important;
                color: white !important;
            }

            .accent-pink button.bg-black,
            .accent-pink button.bg-blue-600 {
                background-color: #ec4899 !important;
                color: white !important;
            }

            .accent-pink button.bg-black:hover,
            .accent-pink button.bg-blue-600:hover {
                background-color: #db2777 !important;
            }

            .accent-pink input:focus,
            .accent-pink select:focus,
            .accent-pink textarea:focus {
                border-color: #ec4899 !important;
                box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1) !important;
            }

            .accent-teal .tab-active {
                background-color: #14b8a6 !important;
                color: white !important;
            }

            .accent-teal button.bg-black,
            .accent-teal button.bg-blue-600 {
                background-color: #14b8a6 !important;
                color: white !important;
            }

            .accent-teal button.bg-black:hover,
            .accent-teal button.bg-blue-600:hover {
                background-color: #0d9488 !important;
            }

            .accent-teal input:focus,
            .accent-teal select:focus,
            .accent-teal textarea:focus {
                border-color: #14b8a6 !important;
                box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1) !important;
            }
            .dark .svg-accent-blue {
                color: #3b82f6 !important;
                stroke: #3b82f6 !important;
            }

            body.dark.accent-green .tab-active {
                background-color: #10b981 !important;
                color: white !important;
            }
            body.dark.accent-green button.bg-black,
            body.dark.accent-green button.bg-blue-600 {
                background-color: #10b981 !important;
                color: white !important;
            }
            body.dark.accent-green button.bg-black:hover,
            body.dark.accent-green button.bg-blue-600:hover {
                background-color: #059669 !important;
            }

            body.dark.accent-green input:focus,
            body.dark.accent-green select:focus,
            body.dark.accent-green textarea:focus {
                border-color: #10b981 !important;
                box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
            }

            body.dark.accent-brown .tab-active {
                background-color: #b55656 !important;
                color: white !important;
            }
            body.dark.accent-brown button.bg-black,
            body.dark.accent-brown button.bg-blue-600 {
                background-color: #b55656 !important;
                color: white !important;
            }
            body.dark.accent-brown button.bg-black:hover,
            body.dark.accent-brown button.bg-blue-600:hover {
                background-color: #9c4444 !important;
            }

            body.dark.accent-brown input:focus,
            body.dark.accent-brown select:focus,
            body.dark.accent-brown textarea:focus {
                border-color: #b55656 !important;
                box-shadow: 0 0 0 3px rgba(181, 86, 86, 0.1) !important;
            }
            body.dark.accent-purple .tab-active {
                background-color: #8b5cf6 !important;
                color: white !important;
            }
            body.dark.accent-purple button.bg-black,
            body.dark.accent-purple button.bg-blue-600 {
                background-color: #8b5cf6 !important;
                color: white !important;
            }
            body.dark.accent-purple button.bg-black:hover,
            body.dark.accent-purple button.bg-blue-600:hover {
                background-color: #7c3aed !important;
            }

            body.dark.accent-purple input:focus,
            body.dark.accent-purple select:focus,
            body.dark.accent-purple textarea:focus {
                border-color: #8b5cf6 !important;
                box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1) !important;
            }
            body.dark.accent-orange .tab-active {
                background-color: #f59e0b !important;
                color: white !important;
            }
            body.dark.accent-orange button.bg-black,
            body.dark.accent-orange button.bg-blue-600 {
                background-color: #f59e0b !important;
                color: white !important;
            }
            body.dark.accent-orange button.bg-black:hover,
            body.dark.accent-orange button.bg-blue-600:hover {
                background-color: #d97706 !important;
            }

            body.dark.accent-orange input:focus,
            body.dark.accent-orange select:focus,
            body.dark.accent-orange textarea:focus {
                border-color: #f59e0b !important;
                box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
            }
            body.dark.accent-pink .tab-active {
                background-color: #ec4899 !important;
                color: white !important;
            }
            body.dark.accent-pink button.bg-black,
            body.dark.accent-pink button.bg-blue-600 {
                background-color: #ec4899 !important;
                color: white !important;
            }
            body.dark.accent-pink button.bg-black:hover,
            body.dark.accent-pink button.bg-blue-600:hover {
                background-color: #db2777 !important;
            }

            body.dark.accent-pink input:focus,
            body.dark.accent-pink select:focus,
            body.dark.accent-pink textarea:focus {
                border-color: #ec4899 !important;
                box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1) !important;
            }
            body.dark.accent-teal .tab-active {
                background-color: #14b8a6 !important;
                color: white !important;
            }
            body.dark.accent-teal button.bg-black,
            body.dark.accent-teal button.bg-blue-600 {
                background-color: #14b8a6 !important;
                color: white !important;
            }
            body.dark.accent-teal button.bg-black:hover,
            body.dark.accent-teal button.bg-blue-600:hover {
                background-color: #0d9488 !important;
            }

            body.dark.accent-teal input:focus,
            body.dark.accent-teal select:focus,
            body.dark.accent-teal textarea:focus {
                border-color: #14b8a6 !important;
                box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1) !important;
            }
            body.dark #userDropdownToggle {
                color: white !important;
                fill: white !important;
            }

            body.accent-purple:not(.dark) {
                background-color: #f5f3ff !important;
            }

            body.accent-green:not(.dark) {
                background-color: #f0fdf4 !important;
            }

            body.accent-orange:not(.dark) {
                background-color: #fff7ed !important;
            }

            body.accent-pink:not(.dark) {
                background-color: #fdf2f8 !important;
            }
            body.accent-brown:not(.dark) {
                background-color: #ede0e1 !important;
            }
            body.accent-teal:not(.dark) {
                background-color: #f0fdfa !important;
            }
            body.dark {
                background-color: #111827 !important;
            }

            .required {
                color: #dc2626 !important;
            }
            .badge {
                display: inline-block;
                padding: 0.25rem 0.5rem;
                font-size: 0.75rem;
                font-weight: 500;
                border-radius: 0.25rem;
            }
            .badge-active {
                background-color: #dcfce7;
                color: #166534;
            }
            .badge-inactive {
                background-color: #fee2e2;
                color: #991b1b;
            }
            .badge-deleted {
                background-color: #fee2e2;
                color: #991b1b;
            }
            .dark .badge-active {
                background-color: #22c55e !important;
                color: #fff !important;
            }
            .dark .badge-inactive {
                background-color: #ef4444 !important;
                color: #fff !important;
            }
            .dark .badge-deleted {
                background-color: #dc2626 !important;
                color: #fff !important;
            }

            .required {
                color: #ef4444 !important;
            }

            .dark .required {
                color: #f87171 !important;
            }

            body.dark #deleteAdminModal svg {
                color: #ef4444 !important;
                stroke: #ef4444 !important;
            }

            body.dark #deleteDoctorModal svg {
                color: #ef4444 !important;
                stroke: #ef4444 !important;
            }

            body.dark textarea {
                background-color: #1e293b !important;
                border-color: #334155 !important;
                color: #f1f5f9 !important;
            }

            body.dark textarea::placeholder {
                color: #94a3b8 !important;
            }

            .action-menu a:hover,
            .action-menu button:hover {
                background-color: var(--accent-color) !important;
                color: #fafafa !important;
            }

            body.dark .action-menu a:hover,
            body.dark .action-menu button:hover {
                background-color: var(--accent-color) !important;
                color: #fff !important;
            }

            body.accent-blue {
                --accent-color: #3b82f6;
            }
            body.accent-green {
                --accent-color: #10b981;
            }
            body.accent-orange {
                --accent-color: #f59e0b;
            }
            body.accent-pink {
                --accent-color: #ec4899;
            }
            body.accent-purple {
                --accent-color: #8b5cf6;
            }
            body.accent-brown {
                --accent-color: #b55656;
            }
            body.accent-teal {
                --accent-color: #14b8a6;
            }

            body.dark button.bg-gray-300,
            body.dark button.bg-gray-400 {
                background-color: #475569 !important;
                color: #f1f5f9 !important;
                border-color: #64748b !important;
            }

            body.dark button.bg-gray-300:hover,
            body.dark button.bg-gray-400:hover {
                background-color: #64748b !important;
                color: #fff !important;
            }
        </style>
    </head>

    <body class="bg-gray-100 font-sans">
        <nav class="bg-white shadow py-3 px-[110px]">
            <div class="flex justify-between items-center w-full">
                <div class="flex items-center">
                    <img id="orgLogo" class="w-8 h-8 mr-2" alt="Logo" />
                    <h1 id="orgName" class="text-xl font-bold text-blue-600">MediCare</h1>
                </div>
                <div class="flex items-center">
                    <div class="flex items-center gap-2">
                        <div id="userAvatar" class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-black font-bold text-lg"></div>
                        <span id="userName" class="font-bold text-sm text-black"></span>
                        <div class="mr-2 font-bold text-sm text-black cursor-pointer flex items-center gap-1" id="userDropdownToggle">
                            <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <rect x="0" fill="none" width="24" height="24" />
                                <g>
                                    <path d="M7 10l5 5 5-5" />
                                </g>
                            </svg>
                        </div>
                        <div id="userDropdownMenu" class="absolute right-0 mt-32 w-44 bg-white border border-gray-200 rounded shadow-md hidden z-50">
                            <ul class="py-1 text-sm text-gray-700">
                                <li>
                                    <a href="" class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 transition-colors duration-150">
                                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                fill-rule="evenodd"
                                                clip-rule="evenodd"
                                                d="M16.5 7.063C16.5 10.258 14.57 13 12 13c-2.572 0-4.5-2.742-4.5-5.938C7.5 3.868 9.16 2 12 2s4.5 1.867 4.5 5.063zM4.102 20.142C4.487 20.6 6.145 22 12 22c5.855 0 7.512-1.4 7.898-1.857a.416.416 0 0 0 .09-.317C19.9 18.944 19.106 15 12 15s-7.9 3.944-7.989 4.826a.416.416 0 0 0 .091.317z"
                                                fill="#000000"
                                            />
                                        </svg>
                                        <span>Profile</span>
                                    </a>
                                </li>
                                <li class="relative">
                                    <button id="themesDropdownToggle" class="w-full flex items-center justify-between px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150">
                                        <div class="flex items-center gap-2">
                                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                />
                                            </svg>
                                            <span>Themes</span>
                                        </div>
                                        <svg
                                            width="16px"
                                            height="16px"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                            class="themes-dropdown-arrow transition-transform duration-200"
                                        >
                                            <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </button>
                                    <div id="themesSubDropdown" class="absolute left-0 top-full mt-1 w-32 bg-white border border-gray-200 rounded shadow-md hidden z-50">
                                        <ul class="py-1 text-sm text-gray-700">
                                            <li>
                                                <button id="lightThemeBtn" class="w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150">
                                                    <svg width="16px" height="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" />
                                                        <path
                                                            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
                                                            stroke="currentColor"
                                                            stroke-width="2"
                                                            stroke-linecap="round"
                                                            stroke-linejoin="round"
                                                        />
                                                    </svg>
                                                    <span>Light</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button id="darkThemeBtn" class="w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150">
                                                    <svg width="16px" height="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                    </svg>
                                                    <span>Dark</span>
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="relative">
                                    <button id="accentsDropdownToggle" class="w-full flex items-center justify-between px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150">
                                        <div class="flex items-center gap-2">
                                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                />
                                            </svg>
                                            <span>Accents</span>
                                        </div>
                                        <svg
                                            width="16px"
                                            height="16px"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                            class="accents-dropdown-arrow transition-transform duration-200"
                                        >
                                            <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </button>
                                    <div id="accentsSubDropdown" class="absolute left-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded shadow-md hidden z-50">
                                        <ul class="py-2 text-sm text-gray-700">
                                            <li>
                                                <button
                                                    id="blueAccentBtn"
                                                    data-color="blue"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-blue-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Blue</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="greenAccentBtn"
                                                    data-color="green"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Green</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="greenAccentBtn"
                                                    data-color="brown"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-blue-200 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Brown</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="purpleAccentBtn"
                                                    data-color="purple"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-purple-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Purple</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="orangeAccentBtn"
                                                    data-color="orange"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-orange-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Orange</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="pinkAccentBtn"
                                                    data-color="pink"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-pink-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Pink</span>
                                                </button>
                                            </li>
                                            <li>
                                                <button
                                                    id="tealAccentBtn"
                                                    data-color="teal"
                                                    class="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 transition-colors duration-150"
                                                >
                                                    <div class="w-4 h-4 rounded-full bg-teal-500 border-2 border-gray-300 accent-color-preview"></div>
                                                    <span>Teal</span>
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <button onclick="showLogoutModal()" class="w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-gray-100 transition-colors duration-150">
                                        <svg width="20px" height="20px" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                fill-rule="evenodd"
                                                clip-rule="evenodd"
                                                d="M1 1L8 1V2L2 2L2 13H8V14H1L1 1ZM10.8536 4.14645L14.1932 7.48614L10.8674 11.0891L10.1326 10.4109L12.358 8L4 8V7L12.2929 7L10.1464 4.85355L10.8536 4.14645Z"
                                                fill="#ff0000"
                                            />
                                        </svg>
                                        <span>Logout</span>
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="p-8">
            <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                <div>
                    <h2 class="text-2xl font-semibold px-20">Super Admin Dashboard</h2>
                    <p class="text-gray-500 px-20">Manage admins and doctors</p>
                </div>
                <!-- <div class="flex items-center gap-4 px-20">
                <div class="relative w-60">
                    <img src="/search.webp" alt="Search"
                        class="absolute left-2 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none" />
                    <input type="text" id="searchInput" placeholder="Search"
                        class="pl-8 py-[20px] h-12 rounded w-full bg-white border border-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-400 text-gray-900 font-semibold placeholder-gray-500 placeholder:text-lg" />
                </div> -->

                <!-- <div class="relative w-60 mt-6">
                    <div id="datePickerDisplay"
                        class="flex items-center justify-center w-full py-[20px] h-12 rounded bg-white border border-gray-800 cursor-pointer focus:ring-2 focus:ring-gray-400 select-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <rect x="3" y="4" width="18" height="18" rx="2" fill="#e5e7eb" />
                            <path stroke="#9ca3af" stroke-width="2" d="M8 2v4M16 2v4M3 10h18" />
                        </svg>
                        <span id="datePickerText" class="text-gray-900 font-semibold">2025-06-23</span>
                    </div>
                    <input type="text" id="datePicker" style="position: absolute; left: -9999px" readonly
                        autocomplete="off" />
                </div>
            </div> -->
            </div>

            <div class="px-20 mt-4">
                <div class="bg-gray-200 p-1 rounded-lg flex items-center mb-4">
                    <button class="tab flex-1 text-center py-1.5 font-semibold transition-colors duration-200 tab-active bg-white shadow rounded" data-tab="adminsTab">Admins</button>
                    <button class="tab flex-1 text-center py-1.5 font-semibold transition-colors duration-200 tab-inactive" data-tab="doctorsTab">Doctors</button>
                </div>

                <div class="flex justify-end items-center gap-4 mb-6">
                    <div class="relative w-80 flex items-center">
                        <img src="/search.webp" alt="Search" class="absolute left-2 w-5 h-5 pointer-events-none" />
                        <input
                            type="text"
                            id="searchInput"
                            placeholder="Search"
                            class="pl-8 h-12 w-full rounded bg-white border border-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-400 text-gray-900 font-semibold placeholder-gray-500 placeholder:text-lg"
                        />
                    </div>

                    <div class="relative w-80 flex items-center">
                        <div
                            id="datePickerDisplay"
                            class="flex items-center justify-center w-full h-12 px-3 rounded bg-white border border-gray-800 cursor-pointer focus:ring-2 focus:ring-gray-400 select-none"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <rect x="3" y="4" width="20" height="20" rx="2" fill="#e5e7eb" />
                                <path stroke="#9ca3af" stroke-width="2" d="M8 2v4M16 2v4M3 10h18" />
                            </svg>
                            <span id="datePickerText" class="text-gray-900 font-semibold">September 1, 2025</span>
                        </div>
                        <input type="text" id="datePicker" class="hidden" readonly autocomplete="off" />
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow space-y-6">
                    <div id="adminsTab" class="tab-content">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold mb-1">Admins List</h3>
                            <button id="openAdminModal" class="bg-black text-white px-6 h-12 flex items-center rounded font-semibold">+ Add Admin</button>
                        </div>

                        <div class="grid grid-cols-12 gap-4 px-4 py-3 text-left text-sm font-bold bg-gray-50 text-gray-800 border-b">
                            <div class="col-span-2">Admin Name</div>
                            <div class="col-span-3">Email</div>
                            <div class="col-span-2">Contact</div>
                            <div class="col-span-2">Status</div>
                            <div class="col-span-2">Password</div>
                            <div class="col-span-1 text-right">Actions</div>
                        </div>
                        <div id="adminList" class="space-y-2 mt-4"></div>
                    </div>

                    <div id="doctorsTab" class="tab-content hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold mb-1">Doctors List</h3>
                            <button id="addDoctorBtn" class="bg-black text-white px-6 h-12 flex items-center rounded font-semibold">+ Add Doctor</button>
                        </div>

                        <div class="grid grid-cols-12 gap-4 px-4 py-3 text-left text-sm font-bold bg-gray-50 text-gray-800 border-b">
                            <div class="col-span-3">Doctor</div>
                            <div class="col-span-2">Specialization</div>
                            <div class="col-span-2">Today's Appointments</div>
                            <div class="col-span-3">Availability</div>
                            <div class="col-span-2">Actions</div>
                        </div>
                        <div id="doctorsList" class="space-y-2 mt-4"></div>
                        <div id="doctorsPagination" class="flex justify-center items-center space-x-2 mt-4 hidden">
                            <button
                                id="prevDoctorsPage"
                                class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-blue-500 hover:text-white hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:text-gray-600 disabled:hover:border-gray-300 transition-colors duration-200"
                            >
                                Previous
                            </button>
                            <span id="doctorsPageInfo" class="text-sm text-gray-600"></span>
                            <button
                                id="nextDoctorsPage"
                                class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-blue-500 hover:text-white hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:text-gray-600 disabled:hover:border-gray-300 transition-colors duration-200"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex justify-center items-center z-50 hidden">
                <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl px-10 py-8 relative">
                    <div class="mb-6 border-b pb-4">
                        <h2 class="text-3xl font-semibold text-gray-800">Edit Admin</h2>
                        <p class="text-sm text-gray-500 mt-1">Update administrator information</p>
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label for="editName" class="text-sm text-gray-500 mb-1 block">Full Name</label>
                            <input
                                id="editName"
                                type="text"
                                class="w-full px-4 py-3 border border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                placeholder="Enter name"
                            />
                        </div>
                        <div>
                            <label for="editEmail" class="text-sm text-gray-500 mb-1 block">Email Address</label>
                            <input
                                id="editEmail"
                                type="email"
                                class="w-full px-4 py-3 border border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                placeholder="Enter email"
                            />
                        </div>

                        <!-- <div>
          <label for="editContact" class="text-sm text-gray-500 mb-1 block">Contact Number</label>
          <input id="editContact" type="text"
            class="w-full px-4 py-3 border border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            placeholder="Enter contact number" />
        </div> -->

                        <div>
                            <label for="editContact" class="text-sm text-gray-500 mb-1 block">Contact Number</label>
                            <input
                                id="editContact"
                                type="text"
                                maxlength="10"
                                pattern="^[6-9][0-9]{9}$"
                                inputmode="numeric"
                                class="w-full px-4 py-3 border border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                placeholder="Enter contact number"
                                title="Contact number must be 10 digits and start with 6, 7, 8, or 9"
                            />
                        </div>

                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Account Status</label>
                            <div id="editStatusDisplay" class="bg-gray-100 border border-gray-300 text-gray-700 rounded-md px-4 py-3 text-lg font-medium shadow-sm capitalize">-</div>
                        </div>
                    </div>

                    <div class="flex justify-end mt-8 gap-4">
                        <button onclick="closeModals()" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium px-6 py-2 rounded-md">Cancel</button>
                        <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-md shadow">Save</button>
                    </div>
                </div>
            </div>

            <!-- <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
    <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-red-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
             viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path class="text-red-600" d="M12 9v4M12 17h.01"/>
          <path class="text-red-600" d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
        </svg>
      </span>
    <div class="bg-white p-6 rounded shadow-lg w-full max-w-sm text-center">
      <h2 class="text-xl font-semibold mb-4">Confirm Delete</h2>
      <p class="mb-4 text-gray-600">Are you sure you want to delete this admin?</p>
      <div class="flex justify-center gap-4">
        <button onclick="closeModals()" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
        <button onclick="confirmDelete()" class="px-4 py-2 bg-red-600 text-white rounded">Delete</button>


      </div>
    </div>
  </div> -->

            <div id="viewModal" class="fixed inset-0 z-50 bg-black bg-opacity-40 backdrop-blur-lg flex items-center justify-center hidden">
                <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl px-10 py-8 relative">
                    <div class="mb-6 border-b pb-4">
                        <h2 class="text-3xl font-semibold text-gray-800">Admin Profile</h2>
                        <p class="text-sm text-gray-500 mt-1">Detailed administrator information</p>
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Full Name</label>
                            <div id="viewAdminName" class="bg-gray-50 border rounded-md px-4 py-3 text-lg font-medium text-gray-900">-</div>
                        </div>
                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Email Address</label>
                            <div id="viewAdminEmail" class="bg-gray-50 border rounded-md px-4 py-3 text-lg font-medium text-gray-900 break-all">-</div>
                        </div>
                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Contact Number</label>
                            <div id="viewAdminContact" class="bg-gray-50 border rounded-md px-4 py-3 text-lg font-medium text-gray-900">-</div>
                        </div>
                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Account Status</label>
                            <div id="viewAdminStatus" class="bg-gray-50 border text-gray-900 rounded-md px-4 py-3 text-lg font-semibold capitalize">-</div>
                        </div>
                        <div>
                            <label class="text-sm text-gray-500 mb-1 block">Password</label>
                            <div id="viewAdminPassword" class="bg-gray-50 border rounded-md px-4 py-3 text-lg font-medium text-gray-900">********</div>
                        </div>
                    </div>
                    <div class="mt-8 flex justify-end">
                        <button onclick="closeModals()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-md shadow">Close</button>
                    </div>
                </div>
            </div>

            <div id="blurredBg" class="fixed inset-0 bg-white/30 bg-opacity-30 backdrop-blur-md hidden z-40"></div>
            <div id="logoutModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg w-full max-w-sm text-center">
                    <div class="flex justify-center mb-4">
                        <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/40">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6 text-red-600 dark:text-red-400 dark:drop-shadow-[0_0_4px_#f87171]"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01M4.93 4.93l14.14 14.14M12 2a10 10 0 100 20 10 10 0 000-20z" />
                            </svg>
                        </span>
                    </div>

                    <h2 class="text-xl font-semibold mb-4 dark:text-gray-200">Logout</h2>
                    <p class="mb-4 text-gray-600 dark:text-gray-300">Are you sure you want to logout?</p>

                    <button onclick="closeModals()" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>

                    <button onclick="logout()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Logout</button>
                </div>
            </div>
        </div>

        <div id="deleteAdminModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex justify-center items-center hidden z-50">
            <div class="bg-white p-6 rounded-2xl shadow-lg w-full max-w-sm text-center">
                <div class="flex justify-center mb-4">
                    <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-red-100">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-6 w-6 text-red-600"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path d="M12 9v4M12 17h.01" />
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        </svg>
                    </span>
                </div>
                <p class="mb-6 text-gray-700 text-lg font-medium">Are you sure you want to delete?</p>
                <div class="flex justify-center gap-4">
                    <button onclick="closeModals()" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                    <button onclick="confirmDeleteAdmin()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Delete</button>
                </div>
            </div>
        </div>

        <div id="restoreAdminModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex justify-center items-center hidden z-50">
            <div class="bg-white p-6 rounded shadow-lg w-full max-w-sm text-center">
                <p class="mb-8 text-gray-600">Are you sure you want to restore?</p>
                <div class="flex justify-center gap-4">
                    <button onclick="closeModals()" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
                    <button onclick="confirmRestoreAdmin()" class="px-4 py-2 bg-red-600 text-white rounded">Restore</button>
                </div>
            </div>
        </div>
        <div id="blurredBg" class="hidden fixed inset-0 bg-black bg-opacity-30 backdrop-blur-md z-40"></div>

        <div id="deleteDoctorModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
            <div class="bg-white p-6 rounded-2xl shadow-lg w-full max-w-sm text-center">
                <div class="flex justify-center mb-4">
                    <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-red-100">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-6 w-6 text-red-600"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path d="M12 9v4M12 17h.01" />
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        </svg>
                    </span>
                </div>
                <p class="mb-6 text-gray-700 text-lg font-medium">Are you sure you want to delete this doctor?</p>
                <div class="flex justify-center gap-4">
                    <button onclick="closeModals()" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                    <button onclick="confirmDeleteDoctor()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Delete</button>
                </div>
            </div>
        </div>

        <div id="restoreDoctorModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
            <div class="bg-white p-6 rounded shadow-lg w-full max-w-sm text-center">
                <p class="mb-8 text-gray-600">Are you sure you want to restore?</p>
                <div class="flex justify-center gap-4">
                    <button onclick="closeModals()" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
                    <button onclick="confirmRestoreDoctor()" class="px-4 py-2 bg-red-600 text-white rounded">Restore</button>
                </div>
            </div>
        </div>
        <div id="viewDoctorProfileModalOverlay" class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-md flex items-center justify-center z-50 hidden">
            <div id="viewDoctorProfileModal" class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg relative">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-6">Doctor Profile</h2>
                <div class="sm:col-span-2 flex flex-col items-center mb-2">
                    <label class="text-sm font-semibold text-gray-600 block mb-2">Profile Photo</label>
                    <div style="position: relative; width: 96px; height: 96px; margin-bottom: 0.5rem">
                        <img src="" id="profileDoctorImage" alt="" class="w-24 h-24 rounded-full object-cover border shadow" style="position: absolute; top: 0; left: 0" />
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Name</p>
                        <p id="profileDoctorName" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Specialization</p>
                        <p id="profileDoctorSpecialty" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Experience</p>
                        <p id="profileDoctorExperience" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Availability</p>
                        <p id="profileDoctorAvailability" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div id="profileDoctorAgeWrapper" class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Age</p>
                        <p id="profileDoctorAge" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div id="profileDoctorGenderWrapper" class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Gender</p>
                        <p id="profileDoctorGender" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div id="profileDoctorPhoneWrapper" class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Phone Number</p>
                        <p id="profileDoctorPhone" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Qualification</p>
                        <p id="profileDoctorQualification" class="text-gray-800 font-semibold text-base break-words"></p>
                    </div>
                    <div id="profileDoctorAddressWrapper" class="sm:col-span-2 bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Address</p>
                        <p id="profileDoctorAddress" class="text-gray-800 font-semibold text-base truncate"></p>
                    </div>
                </div>
                <div class="flex justify-center mt-6">
                    <button id="closeViewDoctorProfileBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">Close</button>
                </div>
            </div>
        </div>
        <div id="editDoctorProfileModalOverlay" class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-md flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg max-h-screen overflow-y-auto relative">
                <button id="closeEditDoctorProfileModal" class="absolute top-4 right-4 text-red-500 hover:text-red-700 text-2xl">&times;</button>
                <h2 class="text-xl font-bold text-center mb-4 text-gray-800">Edit Doctor Profile</h2>
                <form id="editDoctorForm" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="sm:col-span-2 flex flex-col items-center mb-2">
                        <label class="text-sm font-semibold text-gray-600 block mb-2">Profile Photo</label>
                        <div style="position: relative; width: 96px; height: 96px; margin-bottom: 0.5rem">
                            <img id="editDoctorPhotoPreview" src="" alt="" class="w-24 h-24 rounded-full object-cover border shadow" style="display: none; position: absolute; top: 0; left: 0" />
                            <div
                                id="editDoctorDefaultIcon"
                                style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 96px;
                                    height: 96px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    background: #f3f4f6;
                                    border-radius: 50%;
                                "
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none" />
                                    <path stroke="currentColor" stroke-width="2" d="M4 20c0-4 4-7 8-7s8 3 8 7" fill="none" />
                                </svg>
                            </div>
                        </div>
                        <!-- <input type="file" id="editDoctorPhoto" accept="image/*" class="hidden" />
          <button type="button" onclick="document.getElementById('editDoctorPhoto').click()"
            class="px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs font-medium">
            Choose Photo
          </button> -->
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Name</label>
                        <input type="text" id="editDoctorName" name="name" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" required />
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Specialization</label>
                        <select id="editDoctorSpecialization" name="specialty" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" required></select>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Experience</label>
                        <input type="text" id="editDoctorExperience" name="experience" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" />
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Availability</label>
                        <input type="text" id="editDoctorAvailability" name="availability" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" />
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Age</label>
                        <input type="number" id="editDoctorAge" name="age" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" min="1" max="120" />
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Gender</label>
                        <select id="editDoctorGender" name="gender" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Phone Number</label>
                        <input
                            type="tel"
                            id="editDoctorPhone"
                            name="phone"
                            class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500"
                            pattern="^[6-9][0-9]{9}$"
                            maxlength="10"
                            title="Phone number must be 10 digits and start with 6, 7, 8, or 9."
                        />
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Qualification</label>
                        <input type="text" id="editDoctorQualification" name="qualification" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" />
                    </div>
                    <div class="sm:col-span-2 bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block">Address</label>
                        <textarea id="editDoctorAddress" name="address" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" rows="2"></textarea>
                    </div>
                    <div class="sm:col-span-2 flex justify-between pt-3 gap-3">
                        <button type="button" id="cancelEditDoctorBtn" class="w-1/2 py-2 border border-gray-300 rounded-lg bg-white text-gray-700 font-semibold hover:bg-gray-100">Cancel</button>
                        <button type="submit" class="w-1/2 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Save</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="availabilityModalOverlay" class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-md flex items-start justify-center pt-16 z-50 hidden">
            <div id="availabilityModal" class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg relative">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-6">Manage Availability</h2>
                <p id="manageDoctorName" class="text-lg font-semibold text-gray-800 mb-4 text-center"></p>
                <form id="availabilityForm" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm col-span-2">
                        <p class="text-gray-500 text-sm mb-1">Select Date</p>
                        <input
                            type="text"
                            id="availabilityDate"
                            name="date"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="MM/DD/YYYY"
                            required
                            readonly
                        />
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">Start Time</p>
                        <select
                            id="availabilityStart"
                            name="start"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md text-center text-base focus:outline-none focus:ring-2 focus:ring-blue-500"
                            required
                        >
                            <option value="">Select Start Time</option>
                        </select>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <p class="text-gray-500 text-sm mb-1">End Time</p>
                        <select
                            id="availabilityEnd"
                            name="end"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md text-center text-base focus:outline-none focus:ring-2 focus:ring-blue-500"
                            required
                        >
                            <option value="">Select End Time</option>
                        </select>
                    </div>
                    <div class="col-span-2 flex justify-center gap-4 mt-4">
                        <button type="button" id="cancelAvailability" class="px-6 py-2 bg-white border border-gray-300 text-black rounded-lg font-semibold hover:bg-gray-100 transition">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">Save</button>
                    </div>
                </form>
                <button id="closeAvailabilityModal" class="absolute top-4 right-4 text-red-500 hover:text-red-700 text-2xl">&times;</button>
            </div>
        </div>
        <div id="addDoctorModalOverlay" class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-md flex items-start justify-center pt-16 z-50 hidden">
            <div id="addDoctorModal" class="bg-white rounded-lg shadow-lg p-8 w-full max-w-xl relative">
                <button id="closeAddDoctorModal" class="absolute top-4 right-4 text-red-500 hover:text-red-700 text-2xl font-bold">&times;</button>

                <h2 class="text-2xl font-bold text-gray-800 text-center mb-6">Add Doctor</h2>

                <form id="addDoctorForm" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <label for="doctorFirstName" class="block text-sm font-medium text-gray-700 mb-1"> First Name <span class="required">*</span> </label>
                        <input
                            type="text"
                            id="doctorFirstName"
                            name="firstName"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            required
                        />
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                        <label for="doctorLastName" class="block text-sm font-medium text-gray-700 mb-1"> Last Name <span class="required">*</span> </label>
                        <input
                            type="text"
                            id="doctorLastName"
                            name="lastName"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            required
                        />
                    </div>

                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block"> Specialization <span class="required">*</span> </label>
                        <select id="addDoctorSpecialization" name="specialty" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" required></select>
                    </div>

                    <div class="bg-gray-50 p-3 rounded-lg shadow-sm">
                        <label class="text-sm font-medium text-gray-600 mb-1 block"> Experience <span class="required">*</span> </label>
                        <input type="text" id="doctorExperience" name="experience" class="w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-500" required />
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm sm:col-span-2">
                        <label for="doctorQualification" class="block text-sm font-medium text-gray-700 mb-1"> Qualification <span class="required">*</span> </label>
                        <input
                            type="text"
                            id="doctorQualification"
                            name="qualification"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="e.g., MBBS, MD, PhD"
                            required
                        />
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm sm:col-span-2">
                        <label for="doctorAvailability" class="block text-sm font-medium text-gray-700 mb-1"> Availability <span class="required">*</span> </label>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                                <label for="startTime" class="block text-sm font-medium text-gray-700 mb-1"> Start Time <span class="required">*</span> </label>
                                <select id="startTime" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"></select>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                                <label for="endTime" class="block text-sm font-medium text-gray-700 mb-1"> End Time <span class="required">*</span> </label>
                                <select id="endTime" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"></select>
                            </div>
                        </div>

                        <input type="hidden" id="doctorAvailability" name="availability" required />
                    </div>

                    <div id="doctorErrorMsg" class="text-red-600 text-sm sm:col-span-2 hidden"></div>

                    <div class="sm:col-span-2 flex justify-end mt-2">
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm px-6 py-2 rounded-lg transition">Add</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- <footer class="w-full bg-white shadow py-4 mt-8 fixed bottom-0 left-0 z-30 flex items-center justify-center">
    <div class="text-gray-500 font-semibold">medicare@2000</div>
  </footer> -->
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script>
            const tabs = document.querySelectorAll(".tab");
            const tabContents = document.querySelectorAll(".tab-content");
            tabs.forEach((tab) => {
                tab.addEventListener("click", () => {
                    tabs.forEach((t) => t.classList.remove("tab-active", "bg-white", "shadow", "rounded"));
                    tabs.forEach((t) => t.classList.add("tab-inactive"));
                    tab.classList.remove("tab-inactive");
                    tab.classList.add("tab-active", "bg-white", "shadow", "rounded");
                    const targetId = tab.getAttribute("data-tab");
                    tabContents.forEach((content) => content.classList.add("hidden"));
                    document.getElementById(targetId).classList.remove("hidden");
                    if (targetId === "doctorsTab") fetchAndDisplayDoctors();
                    if (targetId === "adminsTab") fetchAdmins();
                });
            });
            window.addEventListener("click", function (e) {
                document.querySelectorAll(".action-menu").forEach((menu) => {
                    if (!menu.contains(e.target) && !menu.previousElementSibling.contains(e.target)) {
                        menu.classList.add("hidden");
                    }
                });
            });
        </script>
        <script>
            let allAdmins = [];
            let currentAdminsPage = 1;
            const adminsPerPage = 7;

            async function fetchAdmins() {
                const adminList = document.getElementById("adminList");
                adminList.innerHTML = `<div class="text-gray-500 text-center py-4">Loading admins...</div>`;

                try {
                    const res = await fetch("/api/superadmin/getAllAdmins");

                    const admins = await res.json();
                    if (!admins.length) {
                        adminList.innerHTML = `<div class="text-gray-500 text-center py-4">No admins found.</div>`;
                        return;
                    }

                    allAdmins = admins;
                    currentAdminsPage = 1;
                    renderAdminsPage();
                } catch (err) {
                    adminList.innerHTML = `<div class="text-red-500 text-center py-4">Failed to load admins.</div>`;
                }
            }

            function renderAdminsPage() {
                const adminList = document.getElementById("adminList");
                const searchQuery = (document.getElementById("searchInput")?.value || document.getElementById("adminSearchInput")?.value || "").trim().toLowerCase();
                const filteredAdmins = searchQuery ? allAdmins.filter((a) => (a.username || "").toLowerCase().includes(searchQuery)) : allAdmins;
                const totalPages = Math.ceil(filteredAdmins.length / adminsPerPage);
                const startIndex = (currentAdminsPage - 1) * adminsPerPage;
                const endIndex = startIndex + adminsPerPage;
                const currentAdmins = filteredAdmins.slice(startIndex, endIndex);
                if (!currentAdmins.length) {
                    adminList.innerHTML = `<div class="text-gray-500 text-center py-4">No admins found.</div>`;
                    updateAdminsPagination(totalPages);
                    return;
                }
                adminList.innerHTML = currentAdmins
                    .map(
                        (admin) => `
  <div class="grid grid-cols-12 gap-4 items-center px-4 py-3 bg-white rounded-lg shadow text-sm relative">
    
    <div class="col-span-2 font-semibold text-gray-800 ${admin.isDeleted ? "line-through text-gray-300" : ""}">
      ${admin.username}
    </div>
    
    <div class="col-span-3 text-gray-700 ${admin.isDeleted ? "line-through text-gray-300" : ""}">
      ${admin.email}
    </div>
    
    <div class="col-span-2 text-gray-700 ${admin.isDeleted ? "line-through text-gray-300" : ""}">
      ${admin.contact || "-"}
    </div>
<div class="col-span-2">
  <span class="badge
    ${admin.status?.toLowerCase() === "active" ? "badge-active" : admin.status?.toLowerCase() === "inactive" ? "badge-inactive" : "badge-deleted"}">
    ${admin.status?.toLowerCase() === "active" ? "Active" : admin.status?.toLowerCase() === "inactive" ? "Inactive" : "Deleted"}
  </span>
</div>




    
<div class="col-span-2">
  <div class="relative w-36">
    <input
      type="password"
      value="${admin.decryptedPassword || "********"}"
      class="admin-password w-full px-2 py-1 pr-8 rounded border border-gray-300 text-gray-600 text-xs bg-gray-100"
      readonly
    />
    <button
      type="button"
      class="absolute inset-y-0 right-1 flex items-center"
      onclick="togglePasswordVisibility(this)">
      
      <!-- Eye hidden -->
      <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 eye-hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a9.957 9.957 0 012.186-3.302M6.42 6.42A9.956 9.956 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.959 9.959 0 01-4.063 5.148M15 12a3 3 0 01-4.95 2.121M3 3l18 18" />
      </svg>

      <!-- Eye open -->
      <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 eye-visible hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z" />
      </svg>
    </button>
  </div>
</div>


    
    <div class="col-span-1 relative text-right">
      <button class="action-btn text-gray-600 hover:text-black focus:outline-none text-xl">⋯</button>
      ${
          admin.isDeleted
              ? `
        <div class="action-menu absolute right-0 mt-2 w-24 bg-white border border-gray-200 rounded shadow-md hidden z-10">
          <button onclick="openRestoreModal('${admin._id}')" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Restore</button>
        </div>
      `
              : `
        <div class="action-menu absolute right-0 mt-2 w-24 bg-white border border-gray-200 rounded shadow-md hidden z-10">
      <button onclick="openViewModal(this)" data-name="${admin.username}" data-email="${admin.email}" data-contact="${admin.contact || "-"}" data-status="${admin.status || "Active"}" " data-password="${admin.decryptedPassword || "********"}""

            class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View</button>
          <button onclick="editAdmin('${admin._id}')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Edit</button>
          <button onclick="openDeleteModal('${admin._id}')" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Delete</button>
        </div>
      `
      }
    </div>

  </div>
`
                    )
                    .join("");

                updateAdminsPagination(totalPages);
            }

            function updateAdminsPagination(totalPages) {
                let pagination = document.getElementById("adminsPagination");
                if (!pagination) {
                    pagination = document.createElement("div");
                    pagination.id = "adminsPagination";
                    pagination.className = "flex justify-center items-center space-x-2 mt-4";
                    document.getElementById("adminList").after(pagination);
                }
                if (totalPages > 1) {
                    pagination.innerHTML = `
          <button id="prevAdminsPage" class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-blue-500 hover:text-white hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:text-gray-600 disabled:hover:border-gray-300 transition-colors duration-200">Previous</button>
          <span id="adminsPageInfo" class="text-sm text-gray-600">Page ${currentAdminsPage} of ${totalPages}</span>
          <button id="nextAdminsPage" class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-blue-500 hover:text-white hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:text-gray-600 disabled:hover:border-gray-300 transition-colors duration-200">Next</button>
        `;
                    document.getElementById("prevAdminsPage").disabled = currentAdminsPage === 1;
                    document.getElementById("nextAdminsPage").disabled = currentAdminsPage === totalPages;
                    document.getElementById("prevAdminsPage").onclick = function () {
                        if (currentAdminsPage > 1) {
                            currentAdminsPage--;
                            renderAdminsPage();
                        }
                    };
                    document.getElementById("nextAdminsPage").onclick = function () {
                        if (currentAdminsPage < totalPages) {
                            currentAdminsPage++;
                            renderAdminsPage();
                        }
                    };
                    pagination.style.display = "flex";
                } else {
                    pagination.innerHTML = "";
                    pagination.style.display = "none";
                }
            }

            window.addEventListener("DOMContentLoaded", fetchAdmins);

            function openViewModal(btn) {
                document.getElementById("viewModal").classList.remove("hidden");
                document.getElementById("viewAdminName").textContent = btn.getAttribute("data-name");
                document.getElementById("viewAdminEmail").textContent = btn.getAttribute("data-email");
                document.getElementById("viewAdminContact").textContent = btn.getAttribute("data-contact");
                document.getElementById("viewAdminStatus").textContent = btn.getAttribute("data-status");
                document.getElementById("viewAdminPassword").textContent = btn.getAttribute("data-password");
            }

            function editAdmin(id) {
                const admin = allAdmins.find((a) => a._id === id);
                if (!admin) return;

                document.getElementById("editName").value = admin.username || "";
                document.getElementById("editEmail").value = admin.email || "";
                document.getElementById("editContact").value = admin.contact || "";
                document.getElementById("editStatusDisplay").textContent = admin.status || "Active";

                document.getElementById("editModal").classList.remove("hidden");

                window.currentEditingAdminId = id;
            }

            let currentDeleteId = null;

            function showLogoutModal() {
                document.getElementById("logoutModal")?.classList.remove("hidden");
                document.getElementById("blurredBg")?.classList.remove("hidden");
                dropdownMenu.classList.add("hidden");
                dropdownMenu.classList.add("hidden");
            }

            function closeModals() {
                document.getElementById("editModal")?.classList.add("hidden");
                document.getElementById("deleteModal")?.classList.add("hidden");
                document.getElementById("logoutModal")?.classList.add("hidden");
                document.getElementById("viewModal")?.classList.add("hidden");
                document.getElementById("deleteAdminModal")?.classList.add("hidden");
                document.getElementById("restoreAdminModal")?.classList.add("hidden");
                document.getElementById("deleteDoctorModal")?.classList.add("hidden");
                document.getElementById("restoreDoctorModal")?.classList.add("hidden");
                document.getElementById("blurredBg")?.classList.add("hidden");
                selectedAdminId = null;
                selectedRestoreAdminId = null;
                selectedDoctorId = null;
                selectedRestoreDoctorId = null;
            }

            let allDoctors = [];
            let currentDoctorsPage = 1;
            const doctorsPerPage = 5;
            let todaysAppointmentsCountMap = {};

            async function fetchAndDisplayDoctors(currentDate) {
                try {
                    const response = await fetch("/api/doctors");
                    if (!response.ok) {
                        throw new Error("Failed to fetch doctors");
                        showToast("Failed to fetch doctors", "error");
                    }
                    allDoctors = await response.json();
                    if (!allDoctors.length) {
                        doctorsList.innerHTML = `<div class="text-gray-500 text-center py-4">No doctors found.</div>`;
                        return;
                    }
                    allDoctors.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    currentDoctorsPage = 1;
                    const appointmentsRes = await fetch("/api/confirmations");
                    const allAppointments = appointmentsRes.ok ? await appointmentsRes.json() : [];
                    const formattedDate = new Date(currentDate || new Date()).toLocaleDateString("en-US", {
                        month: "numeric",
                        day: "numeric",
                        year: "numeric",
                    });
                    todaysAppointmentsCountMap = {};
                    allAppointments.forEach((app) => {
                        if (app.dateData && app.dateData.date === formattedDate && app.status !== "canceled" && app.status !== "cancelled") {
                            const doctorName = app.doctorData?.name || app.doctorName || "";
                            if (doctorName) {
                                todaysAppointmentsCountMap[doctorName] = (todaysAppointmentsCountMap[doctorName] || 0) + 1;
                            }
                        }
                    });
                    renderDoctorsPage();
                } catch (error) {
                    console.error("Error fetching doctors:", error);
                    showToast("Error fetching doctors" + error, "error");
                }
            }

            async function renderDoctorsPage() {
                const doctorsList = document.getElementById("doctorsList");
                const paginationContainer = document.getElementById("doctorsPagination");
                if (!doctorsList) return;
                const doctorSearchQuery = (document.getElementById("searchInput")?.value || document.getElementById("doctorSearchInput")?.value || "").trim().toLowerCase();
                const filteredDoctors = doctorSearchQuery ? allDoctors.filter((d) => (d.name || "").toLowerCase().includes(doctorSearchQuery)) : allDoctors;
                const totalPages = Math.ceil(filteredDoctors.length / doctorsPerPage);
                const startIndex = (currentDoctorsPage - 1) * doctorsPerPage;
                const endIndex = startIndex + doctorsPerPage;
                const currentDoctors = filteredDoctors.slice(startIndex, endIndex);
                doctorsList.innerHTML = "";
                const selectedDate = document.getElementById("datePicker")?.value || new Date().toISOString().split("T")[0];
                const availabilityPromises = currentDoctors.map(async (doctor) => {
                    let displayAvailability = doctor.availability || "Available";
                    try {
                        const res = await fetch(`/api/doctors/${doctor._id}/availability?date=${selectedDate}`);
                        if (res.ok) {
                            const data = await res.json();
                            if (data.start && data.end) {
                                displayAvailability = `${data.start} - ${data.end}`;
                            }
                        }
                    } catch (err) {
                        showToast(err?.message, "error");
                    }
                    return displayAvailability;
                });
                const availabilities = await Promise.all(availabilityPromises);
                currentDoctors.forEach((doctor, idx) => {
                    let infoLine = "";
                    if (doctor.experience && doctor.qualification) {
                        infoLine = `${doctor.experience} yrs exp. · ${doctor.qualification}`;
                    } else if (doctor.experience) {
                        infoLine = `${doctor.experience} yrs exp.`;
                    } else if (doctor.qualification) {
                        infoLine = `${doctor.qualification}`;
                    }
                    let count = 0;
                    const doctorName = doctor.name;
                    if (todaysAppointmentsCountMap && doctorName in todaysAppointmentsCountMap) {
                        count = todaysAppointmentsCountMap[doctorName];
                    }
                    doctorsList.innerHTML += `
<div class="grid grid-cols-12 gap-4 items-center bg-white p-3 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200">
  <div class="col-span-3 flex items-center">
    <div class="w-8 h-8 rounded-full mr-4 flex-shrink-0 overflow-hidden bg-gray-200 doctor-photo-placeholder" data-doctor-id="${doctor._id}" data-doctor-index="${startIndex + idx}" style="cursor:pointer;">
      ${
          doctor.image
              ? `<img src="${doctor.image.startsWith("/uploads/") ? doctor.image : "/uploads/" + doctor.image}" alt="${doctor.name}" class="w-full h-full object-cover" />`
              : `<img src="/default.jpg" alt="No Photo" class="w-full h-full object-cover opacity-50" />`
      }
    </div>
    <div>
      <div class="font-semibold text-gray-800 ${doctor.isDeleted ? "line-through text-gray-300" : ""}">${doctor.name}</div>
      <div class="text-xs text-gray-500 ${doctor.isDeleted ? "line-through text-gray-300" : ""}">${infoLine}</div>
    </div>
  </div>
  <div class="col-span-2 text-gray-600 ${doctor.isDeleted ? "line-through text-gray-300" : ""}">${doctor.specialty || "General Medicine"}</div>
  <div class="col-span-2 text-gray-600 ${doctor.isDeleted ? "line-through text-gray-300" : ""}">${count}</div>
  <div class="col-span-3 text-gray-600 ${doctor.isDeleted ? "line-through text-gray-300" : ""}">${availabilities[idx]}</div>
  <div class="col-span-2 relative">
    <button class="action-btn text-xl">...</button>
      ${
          doctor.isDeleted
              ? `
        <div class="action-menu hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg py-1 z-20">
          <button onclick="openRestoreDoctorModal('${doctor._id}')" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Restore</button>
        </div>
      `
              : `
    
    <div class="action-menu hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg py-1 z-20">
      <a href="#" class="view-profile-btn block px-4 py-2 hover:bg-gray-100 text-gray-700" data-doctor='${JSON.stringify(doctor)}'>View Profile</a>
      <a href="#" class="edit-doctor-profile-btn block px-4 py-2 hover:bg-gray-100 text-gray-700" data-doctor='${JSON.stringify(doctor)}'>Edit Profile</a>
      <a href="#" class="manage-availability-btn block px-4 py-2 hover:bg-gray-100 text-gray-700" data-doctor='${JSON.stringify(doctor)}'>Manage Availability</a>
      <button onclick="openDeleteDoctorModal('${doctor._id}')" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Delete</button>
    </div>
      `
      }
  </div>
</div>
`;
                    document.querySelectorAll(".manage-availability-btn").forEach((button) => {
                        button.addEventListener("click", function (e) {
                            e.preventDefault();
                            const doctor = JSON.parse(this.dataset.doctor);
                            const doctorNameDisplay = document.getElementById("manageDoctorName");
                            doctorNameDisplay.textContent = ` ${doctor.name} (${doctor.specialty || "General Medicine"})`;
                            document.getElementById("availabilityModalOverlay").classList.remove("hidden");
                            document.getElementById("closeAvailabilityModal")?.addEventListener("click", () => {
                                document.getElementById("availabilityModalOverlay").classList.add("hidden");
                            });
                        });
                    });
                });
                updateDoctorsPagination(totalPages);
            }

            function updateDoctorsPagination(totalPages) {
                const paginationContainer = document.getElementById("doctorsPagination");
                const prevButton = document.getElementById("prevDoctorsPage");
                const nextButton = document.getElementById("nextDoctorsPage");
                const pageInfo = document.getElementById("doctorsPageInfo");
                if (!paginationContainer) return;
                if (totalPages > 1) {
                    paginationContainer.classList.remove("hidden");
                } else {
                    paginationContainer.classList.add("hidden");
                }
                pageInfo.textContent = `Page ${currentDoctorsPage} of ${totalPages}`;
                prevButton.disabled = currentDoctorsPage === 1;
                nextButton.disabled = currentDoctorsPage === totalPages;
            }

            document.addEventListener("DOMContentLoaded", function () {
                const prevButton = document.getElementById("prevDoctorsPage");
                const nextButton = document.getElementById("nextDoctorsPage");
                const topSearchInput = document.getElementById("searchInput");
                if (topSearchInput) {
                    topSearchInput.addEventListener("input", () => {
                        currentAdminsPage = 1;
                        currentDoctorsPage = 1;
                        renderAdminsPage();
                        renderDoctorsPage();
                    });
                }
                if (prevButton) {
                    prevButton.addEventListener("click", () => {
                        if (currentDoctorsPage > 1) {
                            currentDoctorsPage--;
                            renderDoctorsPage();
                        }
                    });
                }
                if (nextButton) {
                    nextButton.addEventListener("click", () => {
                        const doctorSearchQuery = (document.getElementById("searchInput")?.value || document.getElementById("doctorSearchInput")?.value || "").trim().toLowerCase();
                        const filteredDoctors = doctorSearchQuery ? allDoctors.filter((d) => (d.name || "").toLowerCase().includes(doctorSearchQuery)) : allDoctors;
                        const totalPages = Math.ceil(filteredDoctors.length / doctorsPerPage);
                        if (currentDoctorsPage < totalPages) {
                            currentDoctorsPage++;
                            renderDoctorsPage();
                        }
                    });
                }
            });
            document.addEventListener("DOMContentLoaded", function () {
                const datePicker = document.getElementById("datePicker");
                const datePickerText = document.getElementById("datePickerText");
                flatpickr("#datePicker", {
                    dateFormat: "Y-m-d",
                    allowInput: false,
                    defaultDate: new Date(),
                    static: true,
                    onReady: function (selectedDates, dateStr, instance) {
                        const monthElem = instance.calendarContainer.querySelector(".flatpickr-current-month");
                        if (monthElem) {
                            const yearInput = monthElem.querySelector(".numInputWrapper");
                            if (yearInput) yearInput.style.display = "none";
                            const yearDropdown = monthElem.querySelector(".flatpickr-yearDropdown-years");
                            if (yearDropdown) yearDropdown.style.display = "none";
                            const yearSpan = monthElem.querySelector(".flatpickr-year");
                            if (yearSpan) yearSpan.style.display = "none";
                            monthElem.style.justifyContent = "center";
                            const monthName = monthElem.querySelector(".cur-month");
                            if (monthName) {
                                monthName.style.fontWeight = "bold";
                                monthName.style.fontSize = "1.3em";
                            }
                        }
                    },
                    onChange: function (selectedDates, dateStr, instance) {
                        const displayText = selectedDates[0]?.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" }) || "";
                        document.getElementById("datePickerText").textContent = displayText;
                        document.getElementById("datePicker").value = dateStr;
                        fetchAndDisplayDoctors(dateStr);
                    },
                });
                document.getElementById("datePickerDisplay").addEventListener("click", function () {
                    if (document.getElementById("datePicker")._flatpickr) {
                        document.getElementById("datePicker")._flatpickr.open();
                    }
                });
                document.getElementById("datePicker").style.color = "transparent";
                const today = new Date();
                document.getElementById("datePicker").value = today.toISOString().split("T")[0];
                document.getElementById("datePickerText").textContent = today.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" });
            });

            function getSelectedDoctorDate() {
                return document.getElementById("doctorDatePicker")?.value || new Date().toISOString().split("T")[0];
            }

            const originalFetchAndDisplayDoctors = fetchAndDisplayDoctors;
            fetchAndDisplayDoctors = function (date) {
                originalFetchAndDisplayDoctors(date || getSelectedDoctorDate());
            };
        </script>

        <script>
            const userName = localStorage.getItem("superadmin_name");
            document.getElementById("userName").textContent = userName;
        </script>
        <script>
            let selectedAdminId = null;
            function openDeleteModal(adminId) {
                selectedAdminId = adminId;
                document.getElementById("deleteAdminModal").classList.remove("hidden");
            }
            async function confirmDeleteAdmin() {
                if (!selectedAdminId) return;
                const token = localStorage.getItem("admin_jwt");
                if (!token) {
                    showToast("You are not authorized. Please log in again.", "error");
                    return;
                }

                try {
                    const res = await fetch(`/api/superadmin/deleteAdmin/${selectedAdminId}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        body: JSON.stringify({ status: "deleted" }),
                    });

                    if (!res.ok) {
                        const errData = await res.json();
                        throw new Error(errData.message || "Failed to delete admin");
                        showToast(errData.message || "Failed to delete admin", "error");
                    }
                    showToast("Admin deleted successfully", "success");
                    document.getElementById("deleteAdminModal")?.classList.add("hidden");
                    closeModals();
                    fetchAdmins();
                } catch (err) {
                    showToast("Delete failed: " + err.message, "error");
                }
            }
        </script>
        <script>
            let selectedRestoreAdminId = null;
            function openRestoreModal(adminId) {
                selectedRestoreAdminId = adminId;
                document.getElementById("restoreAdminModal").classList.remove("hidden");
            }
            async function confirmRestoreAdmin() {
                if (!selectedRestoreAdminId) return;
                const token = localStorage.getItem("admin_jwt");
                if (!token) {
                    showToast("You are not authorized. Please log in again.", "error");
                    return;
                }
                try {
                    const res = await fetch(`/api/superadmin/updateAdmin/${selectedRestoreAdminId}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        body: JSON.stringify({ isDeleted: false, status: "inactive" }),
                    });

                    if (!res.ok) {
                        const errData = await res.json();
                        throw new Error(errData.message || "Failed to restore admin");
                        showToast(errData.message || "Failed to restore admin", "error");
                    }
                    showToast("Admin restored successfully", "success");
                    document.getElementById("restoreAdminModal")?.classList.add("hidden");
                    fetchAdmins();
                } catch (err) {
                    showToast("Restore failed: " + err.message, "error");
                }
            }
        </script>
        <script>
            let selectedDoctorId = null;
            function openDeleteDoctorModal(doctorId) {
                selectedDoctorId = doctorId;
                document.getElementById("deleteDoctorModal").classList.remove("hidden");
                document.getElementById("blurredBg").classList.remove("hidden");
            }
            async function confirmDeleteDoctor() {
                if (!selectedDoctorId) return;
                try {
                    const headers = {};
                    const token = localStorage.getItem("admin_jwt");
                    if (token) headers["Authorization"] = `Bearer ${token}`;
                    const res = await fetch(`/api/doctors/${selectedDoctorId}`, {
                        method: "DELETE",
                        headers,
                    });

                    if (!res.ok) {
                        const errData = await res.json();
                        throw new Error(errData.message || "Failed to delete admin");
                        showToast(errData.message || "Failed to delete admin", "error");
                    }
                    showToast("Doctor deleted successfully", "success");
                    document.getElementById("deleteDoctorModal")?.classList.add("hidden");
                    document.getElementById("blurredBg")?.classList.add("hidden");
                    closeModals();
                    fetchAndDisplayDoctors();
                } catch (err) {
                    showToast("Delete failed: " + err.message, "error");
                }
            }
        </script>
        <script>
            let selectedRestoreDoctorId = null;
            function openRestoreDoctorModal(doctorId) {
                selectedRestoreDoctorId = doctorId;
                document.getElementById("restoreDoctorModal").classList.remove("hidden");
                document.getElementById("blurredBg").classList.remove("hidden");
            }
            async function confirmRestoreDoctor() {
                if (!selectedRestoreDoctorId) return;
                const token = localStorage.getItem("admin_jwt");
                if (!token) {
                    showToast("You are not authorized. Please log in again.", "error");
                    return;
                }
                try {
                    const res = await fetch(`/api/doctors/${selectedRestoreDoctorId}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        body: JSON.stringify({ doctorId: selectedRestoreDoctorId, isDeleted: false }),
                    });

                    if (!res.ok) {
                        const errData = await res.json();
                        throw new Error(errData.message || "Failed to restore admin");
                        showToast(errData.message || "Failed to restore admin", "error");
                    }
                    showToast("Doctor restored successfully", "success");
                    document.getElementById("restoreDoctorModal")?.classList.add("hidden");
                    document.getElementById("blurredBg")?.classList.add("hidden");
                    fetchAndDisplayDoctors();
                } catch (err) {
                    showToast("Restore failed: " + err.message, "error");
                }
            }
        </script>
        <script>
            document.querySelector("#editModal button.bg-blue-600").addEventListener("click", async function () {
                const id = window.currentEditingAdminId;
                const name = document.getElementById("editName").value.trim();
                const email = document.getElementById("editEmail").value.trim();
                const contact = document.getElementById("editContact").value.trim();
                const status = document.getElementById("editStatusDisplay").textContent.trim();

                if (!name || !email) {
                    showToast("Name and Email are required", "error");
                    return;
                }

                const token = localStorage.getItem("admin_jwt");
                if (!token) {
                    showToast("Unauthorized. Please login again.", "error");
                    return;
                }

                try {
                    const res = await fetch(`/api/superadmin/updateAdmin/${id}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        body: JSON.stringify({
                            username: name,
                            email: email,
                            contact: contact,
                            status: status,
                        }),
                    });

                    if (!res.ok) {
                        const data = await res.json();
                        throw new Error(data.message || "Failed to update admin");
                        showToast(data.message || "Failed to update admin", "error");
                    }
                    showToast("Admin updated successfully", "success");
                    closeModals();
                    fetchAdmins();
                } catch (err) {
                    showToast("Error: " + err.message, "error");
                }
            });
        </script>

        <script>
            (function () {
                document.addEventListener("click", function (e) {
                    if (e.target.classList.contains("view-profile-btn")) {
                        e.preventDefault();
                        const doctor = JSON.parse(e.target.getAttribute("data-doctor"));
                        document.getElementById("profileDoctorName").textContent = doctor.name || "";
                        document.getElementById("profileDoctorSpecialty").textContent = doctor.specialty || "";
                        document.getElementById("profileDoctorExperience").textContent = doctor.experience || "";
                        document.getElementById("profileDoctorQualification").textContent = doctor.qualification || "";
                        document.getElementById("profileDoctorAvailability").textContent = doctor.availability || "";
                        document.getElementById("profileDoctorAge").textContent = doctor.age || "";
                        document.getElementById("profileDoctorGender").textContent = doctor.gender || "";
                        document.getElementById("profileDoctorPhone").textContent = doctor.phone || "";
                        document.getElementById("profileDoctorAddress").textContent = doctor.address || "";
                        document.getElementById("profileDoctorImage").src = doctor.image || "/default.jpg";
                        document.getElementById("viewDoctorProfileModalOverlay").classList.remove("hidden");
                        const ageWrapper = document.getElementById("profileDoctorAgeWrapper");
                        const ageElement = document.getElementById("profileDoctorAge");
                        if (doctor.age) {
                            ageElement.textContent = doctor.age;
                            ageWrapper.classList.remove("hidden");
                        } else {
                            ageElement.textContent = "";
                            ageWrapper.classList.add("hidden");
                        }

                        const genderWrapper = document.getElementById("profileDoctorGenderWrapper");
                        const genderElement = document.getElementById("profileDoctorGender");
                        if (doctor.gender) {
                            genderElement.textContent = doctor.gender;
                            genderWrapper.classList.remove("hidden");
                        } else {
                            genderElement.textContent = "";
                            genderWrapper.classList.add("hidden");
                        }

                        const phoneWrapper = document.getElementById("profileDoctorPhoneWrapper");
                        const phoneElement = document.getElementById("profileDoctorPhone");
                        if (doctor.phone) {
                            phoneElement.textContent = doctor.phone;
                            phoneWrapper.classList.remove("hidden");
                        } else {
                            phoneElement.textContent = "";
                            phoneWrapper.classList.add("hidden");
                        }
                        const addressWrapper = document.getElementById("profileDoctorAddressWrapper");
                        const addressElement = document.getElementById("profileDoctorAddress");
                        if (doctor.address) {
                            addressrElement.textContent = doctor.address;
                            addressWrapper.classList.remove("hidden");
                        } else {
                            addressElement.textContent = "";
                            addressWrapper.classList.add("hidden");
                        }
                        document.body.classList.add("blurred-bg");
                        e.target.closest(".action-menu").classList.add("hidden");
                    }
                });
                document.getElementById("closeViewDoctorProfileBtn").onclick = function () {
                    document.getElementById("viewDoctorProfileModalOverlay").classList.add("hidden");
                    document.body.classList.remove("blurred-bg");
                };

                let currentDoctorForEditProfile = null;
                document.addEventListener("click", function (e) {
                    if (e.target.classList.contains("edit-doctor-profile-btn")) {
                        e.preventDefault();
                        const doctor = JSON.parse(e.target.getAttribute("data-doctor"));
                        currentDoctorForEditProfile = doctor;
                        document.getElementById("editDoctorName").value = doctor.name || "";
                        populateSpecialtyDropdown("editDoctorSpecialization");
                        document.getElementById("editDoctorSpecialization").value = doctor.specialty || "";
                        document.getElementById("editDoctorExperience").value = doctor.experience || "";
                        document.getElementById("editDoctorQualification").value = doctor.qualification || "";
                        document.getElementById("editDoctorAvailability").value = doctor.availability || "";
                        document.getElementById("editDoctorAge").value = doctor.age || "";
                        document.getElementById("editDoctorGender").value = doctor.gender || "";
                        document.getElementById("editDoctorPhone").value = doctor.phone || "";
                        document.getElementById("editDoctorAddress").value = doctor.address || "";
                        document.getElementById("editDoctorProfileModalOverlay").classList.remove("hidden");
                        document.body.classList.add("blurred-bg");
                        e.target.closest(".action-menu").classList.add("hidden");
                        const photoPreview = document.getElementById("editDoctorPhotoPreview");
                        const defaultIcon = document.getElementById("editDoctorDefaultIcon");
                        if (doctor.image) {
                            photoPreview.src = `http://localhost:3022${doctor.image}`;
                            photoPreview.style.display = "block";
                            defaultIcon.style.display = "none";
                        } else {
                            photoPreview.src = "";
                            photoPreview.style.display = "none";
                            defaultIcon.style.display = "flex";
                        }
                        document.getElementById("editDoctorProfileModalOverlay").classList.remove("hidden");
                    }
                });
                document.getElementById("closeEditDoctorProfileModal").onclick = closeEditDoctorProfileModal;
                document.getElementById("cancelEditDoctorBtn").onclick = closeEditDoctorProfileModal;
                function closeEditDoctorProfileModal() {
                    document.getElementById("editDoctorProfileModalOverlay").classList.add("hidden");
                    document.body.classList.remove("blurred-bg");
                    currentDoctorForEditProfile = null;
                }
                document.getElementById("editDoctorForm").onsubmit = async function (e) {
                    e.preventDefault();
                    if (!currentDoctorForEditProfile || !currentDoctorForEditProfile._id) {
                        showToast("No doctor selected for editing.", "error");
                        return;
                    }
                    const formData = new FormData();
                    formData.append("name", document.getElementById("editDoctorName").value);
                    formData.append("specialty", document.getElementById("editDoctorSpecialization").value);
                    formData.append("experience", document.getElementById("editDoctorExperience").value);
                    formData.append("qualification", document.getElementById("editDoctorQualification").value);
                    formData.append("availability", document.getElementById("editDoctorAvailability").value);
                    formData.append("age", document.getElementById("editDoctorAge").value);
                    formData.append("gender", document.getElementById("editDoctorGender").value);
                    formData.append("phone", document.getElementById("editDoctorPhone").value);
                    formData.append("address", document.getElementById("editDoctorAddress").value);
                    // const photoInput = document.getElementById("editDoctorPhoto");
                    // if (photoInput.files && photoInput.files[0]) {
                    //   formData.append("photo", photoInput.files[0]);
                    // }
                    try {
                        const response = await fetch(`/api/doctors/${currentDoctorForEditProfile._id}`, {
                            method: "PUT",
                            body: formData,
                        });
                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({}));
                            throw new Error(errorData.error || "Failed to update doctor");
                            showToast(errorData.error || "Failed to update doctor", "error");
                        }
                        closeEditDoctorProfileModal();
                        await fetchAndDisplayDoctors(document.getElementById("datePicker").value);
                        showToast("Doctor profile updated successfully!", "success");
                    } catch (err) {
                        showToast("Error updating doctor: " + err.message, "error");
                    }
                };
                // document.getElementById("editDoctorPhoto").addEventListener("change", function (event) {
                //   const file = event.target.files[0];
                //   const photoPreview = document.getElementById("editDoctorPhotoPreview");
                //   const defaultIcon = document.getElementById("editDoctorDefaultIcon");
                //   if (file) {
                //     const reader = new FileReader();
                //     reader.onload = function (e) {
                //       photoPreview.src = e.target.result;
                //       photoPreview.style.display = "block";
                //       defaultIcon.style.display = "none";
                //     };
                //     reader.readAsDataURL(file);
                //   } else {
                //     photoPreview.src = "";
                //     photoPreview.style.display = "none";
                //     defaultIcon.style.display = "flex";
                //   }
                // });
                let currentDoctorId = null;
                document.addEventListener("click", function (e) {
                    if (e.target.classList.contains("manage-availability-btn")) {
                        e.preventDefault();
                        const doctor = JSON.parse(e.target.getAttribute("data-doctor"));
                        currentDoctorId = doctor._id;
                        document.getElementById("availabilityModalOverlay").classList.remove("hidden");
                        document.body.classList.add("blurred-bg");
                        document.getElementById("availabilityForm").reset();
                        const today = new Date();
                        availabilityDatePicker.setDate(today, true);

                        fetchAndFillAvailabilityForDate(today.toISOString().split("T")[0]);
                        e.target.closest(".action-menu").classList.add("hidden");
                    }
                });
                document.getElementById("cancelAvailability").onclick = closeAvailabilityModal;
                document.getElementById("closeAvailabilityModal").onclick = closeAvailabilityModal;
                function closeAvailabilityModal() {
                    document.getElementById("availabilityModalOverlay").classList.add("hidden");
                    document.body.classList.remove("blurred-bg");
                    currentDoctorId = null;
                    document.getElementById("availabilityForm").reset();
                    populateStartTimeDropdown();
                    populateEndTimeDropdown("");
                }

                const timeSlots = ["9:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM"];

                function populateStartTimeDropdown() {
                    const startSelect = document.getElementById("availabilityStart");
                    if (!startSelect) return;

                    startSelect.innerHTML = "";
                    timeSlots.forEach((time) => {
                        const option = document.createElement("option");
                        option.value = time;
                        option.textContent = time;
                        startSelect.appendChild(option);
                    });
                }

                function populateEndTimeDropdown(selectedStartTime) {
                    const endSelect = document.getElementById("availabilityEnd");
                    if (!endSelect) return;

                    endSelect.innerHTML = "";

                    if (!selectedStartTime) return;

                    const startIndex = timeSlots.indexOf(selectedStartTime);
                    if (startIndex === -1) return;

                    for (let i = startIndex + 1; i < timeSlots.length; i++) {
                        const option = document.createElement("option");
                        option.value = timeSlots[i];
                        option.textContent = timeSlots[i];
                        endSelect.appendChild(option);
                    }
                }

                document.addEventListener("change", function (e) {
                    if (e.target.id === "availabilityStart") {
                        populateEndTimeDropdown(e.target.value);

                        document.getElementById("availabilityEnd").value = "";
                    }
                });

                document.addEventListener("DOMContentLoaded", function () {
                    populateStartTimeDropdown();
                    populateEndTimeDropdown("");
                });

                const availabilityDateInput = document.getElementById("availabilityDate");
                const availabilityDatePicker = flatpickr(availabilityDateInput, {
                    dateFormat: "Y-m-d",
                    allowInput: false,
                    static: true,
                    defaultDate: new Date(),
                    onChange: function (selectedDates, dateStr) {
                        fetchAndFillAvailabilityForDate(dateStr);
                    },
                });

                async function fetchAndFillAvailabilityForDate(dateStr) {
                    if (!currentDoctorId) return;

                    populateStartTimeDropdown();

                    try {
                        const res = await fetch(`/api/doctors/${currentDoctorId}/availability?date=${dateStr}`);
                        if (res.ok) {
                            const data = await res.json();

                            if (data.start) {
                                document.getElementById("availabilityStart").value = data.start;
                                populateEndTimeDropdown(data.start);

                                if (data.end) {
                                    document.getElementById("availabilityEnd").value = data.end;
                                }
                            } else {
                                document.getElementById("availabilityStart").value = "";
                                document.getElementById("availabilityEnd").value = "";

                                populateEndTimeDropdown("");
                            }
                        } else {
                            document.getElementById("availabilityStart").value = "";
                            document.getElementById("availabilityEnd").value = "";

                            populateEndTimeDropdown("");
                        }
                    } catch (err) {
                        document.getElementById("availabilityStart").value = "";
                        document.getElementById("availabilityEnd").value = "";

                        populateEndTimeDropdown("");
                    }
                }
                document.getElementById("availabilityForm").onsubmit = async function (e) {
                    e.preventDefault();
                    const date = document.getElementById("availabilityDate").value;
                    const start = document.getElementById("availabilityStart").value;
                    const end = document.getElementById("availabilityEnd").value;
                    if (!currentDoctorId) return;
                    try {
                        const response = await fetch(`/api/doctors/${currentDoctorId}/availability`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ date, start, end }),
                        });
                        if (!response.ok) {
                            showToast("Failed to save availability", "error");
                            return;
                        }
                        showToast("Availability saved successfully!", "success");

                        closeAvailabilityModal();
                        await fetchAndDisplayDoctors(document.getElementById("datePicker").value);
                    } catch (err) {
                        showToast("Error saving availability: " + err.message, "error");
                    }
                };
            })();
            (function () {
                document.addEventListener("click", function (e) {
                    if (e.target.classList.contains("action-btn")) {
                        e.stopPropagation();
                        document.querySelectorAll(".action-menu").forEach((menu) => menu.classList.add("hidden"));
                        const menu = e.target.nextElementSibling;
                        if (menu) menu.classList.toggle("hidden");
                    } else {
                        document.querySelectorAll(".action-menu").forEach((menu) => menu.classList.add("hidden"));
                    }
                });
            })();
            (function () {
                const addDoctorBtn = document.getElementById("addDoctorBtn");
                const addDoctorModalOverlay = document.getElementById("addDoctorModalOverlay");
                if (addDoctorModalOverlay) {
                    const closeAddDoctorModal = document.getElementById("closeAddDoctorModal");
                    const openModal = () => {
                        addDoctorModalOverlay.classList.remove("hidden");
                        document.body.classList.add("blurred-bg");

                        const form = document.getElementById("addDoctorForm");
                        if (form) form.reset();

                        populateSpecialtyDropdown("addDoctorSpecialization");
                        const specialtyDropdown = document.getElementById("addDoctorSpecialization");
                        if (specialtyDropdown) {
                            specialtyDropdown.selectedIndex = 0;
                        }

                        showDoctorError("");
                    };

                    const closeModal = () => {
                        addDoctorModalOverlay.classList.add("hidden");
                        document.body.classList.remove("blurred-bg");
                        const form = document.getElementById("addDoctorForm");
                        if (form) form.reset();
                        showDoctorError("");
                    };
                    if (addDoctorBtn) {
                        addDoctorBtn.addEventListener("click", openModal);
                    }
                    if (closeAddDoctorModal) {
                        closeAddDoctorModal.addEventListener("click", closeModal);
                    }
                    const addDoctorForm = document.getElementById("addDoctorForm");
                    if (addDoctorForm) {
                        addDoctorForm.addEventListener("submit", async (e) => {
                            e.preventDefault();
                            const formData = new FormData(addDoctorForm);
                            const firstName = formData.get("firstName")?.trim() || "";
                            const lastName = formData.get("lastName")?.trim() || "";
                            const fullName = `Dr. ${firstName} ${lastName}`.replace(/\s+/g, " ").trim().toLowerCase();
                            try {
                                const res = await fetch("/api/doctors");
                                const existingDoctors = await res.json();
                                const isDuplicate = existingDoctors.some((doc) => {
                                    const existingName = (doc.name || "").replace(/\s+/g, " ").trim().toLowerCase();
                                    return existingName === fullName;
                                });
                                if (isDuplicate) {
                                    showDoctorError("Doctor already exists: duplicate name.");
                                    return;
                                }
                            } catch (err) {
                                showDoctorError("Error checking existing doctors.");
                                return;
                            }
                            const doctorData = {
                                firstName,
                                lastName,
                                name: `Dr. ${firstName} ${lastName}`,
                                specialty: formData.get("specialty"),
                                experience: formData.get("experience"),
                                qualification: formData.get("qualification"),
                                availability: formData.get("availability"),
                            };
                            try {
                                const response = await fetch("/api/doctors", {
                                    method: "POST",
                                    headers: { "Content-Type": "application/json" },
                                    body: JSON.stringify(doctorData),
                                });
                                if (!response.ok) {
                                    const errorData = await response.json();
                                    showDoctorError(errorData.error || "Failed to add doctor.");
                                    return;
                                }
                                showDoctorError("");
                                showToast("Doctor added successfully!", "success");
                                closeModal();
                                await fetchAndDisplayDoctors();
                            } catch (error) {
                                showDoctorError("Error adding doctor: " + (error.message || "Unknown error"));
                            }
                        });
                    }
                }
                function showDoctorError(msg) {
                    const errorDiv = document.getElementById("doctorErrorMsg");
                    if (!errorDiv) return;
                    if (msg) {
                        errorDiv.textContent = msg;
                        errorDiv.style.display = "block";
                    } else {
                        errorDiv.textContent = "";
                        errorDiv.style.display = "none";
                    }
                }
            })();
        </script>
        <script>
            function getInitials(name) {
                if (!name) return "";
                const parts = name.trim().split(" ");
                if (parts.length === 1) return parts[0][0].toUpperCase();
                return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
            }
            const AdminName = localStorage.getItem("superadmin_name");
            document.getElementById("userName").textContent = userName;
            document.getElementById("userAvatar").textContent = getInitials(userName);
        </script>

        <script>
            const dropdownToggle = document.getElementById("userDropdownToggle");
            const dropdownMenu = document.getElementById("userDropdownMenu");

            dropdownToggle.addEventListener("click", () => {
                dropdownMenu.classList.toggle("hidden");
            });

            document.addEventListener("click", (event) => {
                if (!dropdownToggle.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.classList.add("hidden");
                }
            });
        </script>
        <script>
            async function logout() {
                try {
                    const token = localStorage.getItem("admin_jwt");

                    const res = await fetch("/api/superadmin/logout", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ token }),
                    });

                    const result = await res.json();
                    if (res.ok) {
                        const savedTheme = localStorage.getItem("theme");
                        const savedAccent = localStorage.getItem("accent");

                        localStorage.clear();

                        if (savedTheme) localStorage.setItem("theme", savedTheme);
                        if (savedAccent) localStorage.setItem("accent", savedAccent);

                        window.location.href = "login.html";
                    } else {
                        showToast(result.error, "error");
                    }
                } catch (err) {
                    showToast("Error: " + err.message, "error");
                }
            }
        </script>

        <div id="toast-container" class="fixed bottom-4 right-0 transform -translate-x-1/2 z-[9999] space-y-3"></div>
        <script>
            function showToast(message, type = "success") {
                const toast = document.createElement("div");
                const types = {
                    success: {
                        bg: "bg-green-600",
                        text: "text-white",
                        svg: `<svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.707a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414L9 13.414l4.707-4.707z" clip-rule="evenodd"/></svg>`,
                    },
                    error: {
                        bg: "bg-red-600",
                        text: "text-white",
                        svg: `<svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10A8 8 0 11 2 10a8 8 0 0116 0zm-4.293-2.707a1 1 0 00-1.414-1.414L10 8.586 7.707 6.293a1 1 0 10-1.414 1.414L8.586 10l-2.293 2.293a1 1 0 101.414 1.414L10 11.414l2.293 2.293a1 1 0 001.414-1.414L11.414 10l2.293-2.293z" clip-rule="evenodd"/></svg>`,
                    },
                    warning: {
                        bg: "bg-yellow-600",
                        text: "text-white",
                        svg: `<svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.721-1.36 3.486 0l6.518 11.594c.75 1.334-.213 2.995-1.742 2.995H3.48c-1.53 0-2.492-1.661-1.742-2.995L8.257 3.1zM11 14a1 1 0 10-2 0 1 1 0 002 0zm-1-2a1 1 0 01-1-1V9a1 1 0 112 0v2a1 1 0 01-1 1z" clip-rule="evenodd"/></svg>`,
                    },
                };
                const { bg, text, svg } = types[type];
                toast.className = `${bg} ${text} px-4 py-4 rounded shadow flex items-center justify-between animate-slide-in`;
                toast.innerHTML = `
        <div class="flex items-center gap-2">
          ${svg}
          <span>${message}</span>
        </div>
      `;
                document.getElementById("toast-container").appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 2000);
            }
        </script>

        <script>
            const specialties = [
                "Cardiology",
                "Neurology",
                "Dermatology",
                "Pediatrics",
                "Orthopedics",
                "Radiology",
                "Psychiatry",
                "ENT",
                "Gastroenterology",
                "Oncology",
                "Anesthesiology",
                "Pathology",
                "Pulmonology",
                "Urology",
                "Nephrology",
                "Ophthalmology",
                "General Surgery",
                "Plastic Surgery",
                "Diabetology",
                "Rheumatology",
                "Hematology",
                "Infectious Disease",
                "Endocrinology",
                "Obstetrics & Gynecology",
                "Family Medicine",
            ];

            function populateSpecialtyDropdown(selectId) {
                const select = document.getElementById(selectId);
                if (!select) return;

                select.innerHTML = "";
                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.textContent = "Select Specialty";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                select.appendChild(defaultOption);
                specialties.forEach((spec) => {
                    const option = document.createElement("option");
                    option.value = spec;
                    option.textContent = spec;
                    select.appendChild(option);
                });
            }

            populateSpecialtyDropdown("doctorSpecialty");
            populateSpecialtyDropdown("addDoctorSpecialization");
            populateSpecialtyDropdown("editDoctorSpecialization");
        </script>
        <div id="superAdminProfileModal" class="fixed inset-0 bg-gray-100 bg-opacity-90 backdrop-blur-md flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-xl p-8 relative">
                <!-- <button id="closeSuperAdminProfileModal"
        class="absolute top-4 right-4 text-gray-400 hover:text-red-600 text-2xl">&times;</button> -->
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Super Admin Profile</h2>
                <div class="flex items-center gap-4 mb-6">
                    <div class="w-14 h-14 rounded-full bg-gray-200 flex items-center justify-center text-2xl font-bold text-gray-600">
                        <span id="superAdminProfileInitials"></span>
                    </div>
                    <div class="flex-1">
                        <input id="superAdminProfileNameTop" class="text-xl font-semibold text-gray-900 bg-transparent border-none outline-none w-full" readonly />
                    </div>
                    <button id="editSuperAdminProfileBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium">Edit</button>
                </div>
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">Name</label>
                            <input id="superAdminProfileName" class="w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-100 text-gray-800 font-medium" readonly />
                        </div>
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">Date of Joining</label>
                            <input id="superAdminProfileJoined" class="w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-100 text-gray-800 font-medium" disabled />
                        </div>
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">Email</label>
                            <input id="superAdminProfileEmail" class="w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-100 text-gray-800 font-medium" readonly />
                        </div>
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">Contact Number</label>
                            <input id="superAdminProfileContact" class="w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-100 text-gray-800 font-medium" readonly />
                        </div>
                    </div>
                    <div id="editSuperAdminProfileActions" class="flex gap-3 mt-6 hidden">
                        <button id="cancelSuperAdminProfileBtn" class="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg font-semibold hover:bg-gray-400">Cancel</button>
                        <button id="saveSuperAdminProfileBtn" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700">Save</button>
                    </div>
                </div>
                <div class="flex justify-end mt-8">
                    <button id="closeSuperAdminProfileBtn" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition">Close</button>
                </div>
            </div>
        </div>
        <script>
            const profileLink = document.querySelector('#userDropdownMenu a[href=""]');
            const modal = document.getElementById("superAdminProfileModal");
            const closeBtn = document.getElementById("closeSuperAdminProfileModal");
            const closeBtn2 = document.getElementById("closeSuperAdminProfileBtn");
            const nameTop = document.getElementById("superAdminProfileNameTop");
            const initials = document.getElementById("superAdminProfileInitials");
            const name = document.getElementById("superAdminProfileName");
            const joined = document.getElementById("superAdminProfileJoined");
            const email = document.getElementById("superAdminProfileEmail");
            const contact = document.getElementById("superAdminProfileContact");
            superAdminProfileContact.addEventListener("keydown", function (e) {
                const allowedKeys = ["Backspace", "Delete", "ArrowLeft", "ArrowRight", "Tab"];
                if (allowedKeys.includes(e.key)) return;

                if (!/^[0-9]$/.test(e.key)) {
                    e.preventDefault();
                    return;
                }

                if (this.value.length >= 10) {
                    e.preventDefault();
                    return;
                }

                if (this.value.length === 0 && !/[6-9]/.test(e.key)) {
                    e.preventDefault();
                    return;
                }
            });
            const editBtn = document.getElementById("editSuperAdminProfileBtn");
            const editActions = document.getElementById("editSuperAdminProfileActions");
            const saveBtn = document.getElementById("saveSuperAdminProfileBtn");
            const cancelBtn = document.getElementById("cancelSuperAdminProfileBtn");

            let currentId = null,
                origName = "",
                origEmail = "",
                origContact = "";

            function setInitials(nameVal) {
                if (!nameVal) return (initials.textContent = "");
                const parts = nameVal.trim().split(" ");
                initials.textContent = parts.length > 1 ? (parts[0][0] + parts[1][0]).toUpperCase() : nameVal[0].toUpperCase();
            }

            if (profileLink && modal) {
                profileLink.addEventListener("click", async (e) => {
                    e.preventDefault();
                    const localName = localStorage.getItem("superadmin_name") || "";
                    nameTop.value = localName;
                    setInitials(localName);

                    try {
                        const token = localStorage.getItem("admin_jwt");
                        const res = await fetch("/api/superadmin/getAdminProfile", {
                            headers: { Authorization: `Bearer ${token}` },
                        });

                        if (res.ok) {
                            const data = await res.json();
                            name.value = data.admin.username;
                            nameTop.value = data.admin.username;
                            joined.value = new Date(data.admin.createdAt).toLocaleDateString();
                            email.value = data.admin.email;
                            contact.value = data.admin.contact;
                            origName = name.value;
                            origEmail = email.value;
                            origContact = contact.value;
                            currentId = data.admin._id;
                        }
                    } catch (err) {
                        console.error("Error fetching superadmin profile:", err);
                    }

                    modal.classList.remove("hidden");
                });
            }

            if (closeBtn) {
                closeBtn.onclick = () => {
                    modal.classList.add("hidden");
                    resetModal();
                };
            }
            if (closeBtn2) {
                closeBtn2.onclick = () => {
                    modal.classList.add("hidden");
                    resetModal();
                };
            }
            function resetModal() {
                name.readOnly = true;
                nameTop.readOnly = true;
                email.readOnly = true;
                contact.readOnly = true;
                joined.disabled = true;
                editActions.classList.add("hidden");
                editBtn.disabled = false;
                name.value = origName;
                nameTop.value = origName;
                email.value = origEmail;
                contact.value = origContact;
            }

            if (editBtn) {
                editBtn.onclick = () => {
                    name.readOnly = false;
                    nameTop.readOnly = false;
                    email.readOnly = false;
                    contact.readOnly = false;
                    joined.disabled = true;
                    editActions.classList.remove("hidden");
                    editBtn.disabled = true;
                };
            }

            if (cancelBtn) {
                cancelBtn.onclick = () => {
                    name.value = origName;
                    nameTop.value = origName;
                    email.value = origEmail;
                    contact.value = origContact;
                    name.readOnly = true;
                    nameTop.readOnly = true;
                    email.readOnly = true;
                    contact.readOnly = true;
                    joined.disabled = true;
                    editActions.classList.add("hidden");
                    editBtn.disabled = false;
                };
            }

            if (saveBtn) {
                saveBtn.onclick = async () => {
                    const newName = name.value.trim();
                    const newEmail = email.value.trim();
                    const newContact = contact.value.trim();

                    if (!newName || !/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(newEmail)) {
                        showToast("Please enter correct email.", "error");
                        return;
                    }
                    if (!/^[6-9][0-9]{9}$/.test(newContact)) {
                        showToast("Please enter a valid 10 digit mobile number starting with 6-9.", "error");
                        return;
                    }
                    try {
                        const token = localStorage.getItem("admin_jwt");
                        const res = await fetch("/api/superadmin/updateProfile", {
                            method: "PUT",
                            headers: {
                                "Content-Type": "application/json",
                                Authorization: `Bearer ${token}`,
                            },
                            body: JSON.stringify({ id: currentId, username: newName, email: newEmail, contact: newContact }),
                        });

                        if (res.ok) {
                            showToast("Profile updated successfully!", "success");
                            resetModal();
                            localStorage.setItem("superadmin_name", newName);
                            localStorage.setItem("email", newEmail);
                            localStorage.setItem("contact", newContact);
                            document.getElementById("userName").textContent = newName;
                            document.getElementById("userAvatar").textContent = getInitials(newName);
                            modal.classList.add("hidden");
                        } else {
                            showToast("Update failed.", "error");
                        }
                    } catch (err) {
                        showToast("Error updating profile.", "error");
                    }
                };
            }
        </script>
        <script>
            function togglePasswordVisibility(button) {
                const container = button.closest(".relative");
                const input = container.querySelector(".admin-password");
                const eyeOpen = button.querySelector(".eye-visible");
                const eyeSlash = button.querySelector(".eye-hidden");

                if (input.type === "password") {
                    input.type = "text";
                    eyeOpen.classList.remove("hidden");
                    eyeSlash.classList.add("hidden");
                } else {
                    input.type = "password";
                    eyeOpen.classList.add("hidden");
                    eyeSlash.classList.remove("hidden");
                }
            }
        </script>
        <div id="adminModalOverlay" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md z-50 hidden flex items-center justify-center">
            <div class="bg-white w-full max-w-md p-6 rounded-lg shadow-lg relative">
                <button id="closeAdminModal" class="absolute top-2 right-2 text-gray-500 hover:text-black">&times;</button>
                <div class="flex flex-col items-center mb-4">
                    <div class="bg-blue-500 rounded-full p-3 mb-2">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5.121 17.804A13.937 13.937 0 0112 15c2.003 0 3.89.435 5.56 1.21M15 10a3 3 0 11-6 0 3 3 0 016 0z"
                            />
                        </svg>
                    </div>
                    <h2 class="text-xl font-semibold">Admin Registration</h2>
                </div>
                <form id="adminRegForm" autocomplete="off" novalidate>
                    <label class="block mb-1 text-gray-700 dark:text-gray-200"> Username <span class="required">*</span> </label>
                    <input type="text" name="username" placeholder="Username" class="w-full px-4 py-2 mb-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required />

                    <label class="block mb-1 text-gray-700 dark:text-gray-200"> Email <span class="required">*</span> </label>
                    <input type="email" name="email" placeholder="Email" class="w-full px-4 py-2 mb-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required />

                    <label class="block mb-1 text-gray-700 dark:text-gray-200"> Contact <span class="required">*</span> </label>
                    <input
                        type="tel"
                        name="contact"
                        placeholder="Contact"
                        pattern="[6-9][0-9]{9}"
                        maxlength="10"
                        minlength="10"
                        class="w-full px-4 py-2 mb-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/^(?![6-9]).*/, ''); if(this.value.length > 10) this.value = this.value.slice(0,10);"
                        required
                    />

                    <label class="block mb-1 text-gray-700 dark:text-gray-200"> Password <span class="required">*</span> </label>
                    <input type="password" name="password" placeholder="Password" class="w-full px-4 py-2 mb-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required />

                    <label class="block mb-1 text-gray-700 dark:text-gray-200"> Confirm Password <span class="required">*</span> </label>
                    <input
                        type="password"
                        name="confirmPassword"
                        placeholder="Confirm Password"
                        class="w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                        required
                    />
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold">REGISTER</button>
                </form>
            </div>
        </div>
        <script>
            document.getElementById("openAdminModal").addEventListener("click", () => {
                document.getElementById("adminModalOverlay").classList.remove("hidden");
            });

            document.getElementById("closeAdminModal").addEventListener("click", () => {
                document.getElementById("adminModalOverlay").classList.add("hidden");
            });
            document.getElementById("adminRegForm").addEventListener("submit", async function (e) {
                e.preventDefault();
                const form = e.target;
                const username = form.username.value.trim();
                const email = form.email.value.trim();
                const contact = form.contact.value.trim();
                const password = form.password.value;
                const confirmPassword = form.confirmPassword.value;

                if (!username || !email || !password || !confirmPassword || !contact) {
                    showToast("Please fill in all fields.", "warning");
                    return;
                }

                const emailPattern = /^(?=.*[A-Za-z])[A-Za-z\d._%+-]+@[A-Za-z\d.-]+\.[A-Za-z]{2,}$/;
                if (!emailPattern.test(email)) {
                    showToast("Enter a valid email with at least one letter and one number.", "warning");
                    return;
                }

                if (password.length < 6) {
                    showToast("Password must be at least 6 characters.", "warning");
                    return;
                }

                if (password !== confirmPassword) {
                    showToast("Passwords do not match.", "error");
                    return;
                }

                try {
                    const res = await fetch("/api/admin/register", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ username, email, password, contact }),
                    });

                    if (res.ok) {
                        showToast("Registration successful!", "success");
                        setTimeout(() => {
                            document.getElementById("adminModalOverlay").classList.add("hidden");
                            form.reset();
                            fetchAdmins();
                        }, 1000);
                    } else {
                        const err = await res.json();
                        showToast(err.error || "Registration failed", "error");
                    }
                } catch (err) {
                    showToast("Error: " + err.message, "error");
                }
            });
        </script>

        <div id="doctorDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg w-[400px] shadow-xl relative">
                <button onclick="closeDoctorModal()" class="absolute top-2 right-2 text-gray-600 hover:text-red-500">&times;</button>
                <h2 id="doctorName" class="text-xl font-bold mb-2"></h2>
                <p id="doctorSpecialty" class="text-sm text-gray-700 mb-1"></p>
                <p id="doctorExperience" class="text-sm text-gray-700 mb-1"></p>
                <p id="doctorQualification" class="text-sm text-gray-700 mb-1"></p>
                <p id="doctorAvailability" class="text-sm text-gray-700"></p>
            </div>
        </div>
        <script>
            function showDoctorDetails(doctor, availability) {
                document.getElementById("doctorDetailsModal").classList.remove("hidden");
                document.getElementById("doctorName").textContent = doctor.name || "N/A";
                document.getElementById("doctorSpecialty").textContent = "Specialty: " + (doctor.specialty || "General Medicine");
                document.getElementById("doctorExperience").textContent = "Experience: " + (doctor.experience || "N/A") + " years";
                document.getElementById("doctorQualification").textContent = "Qualification: " + (doctor.qualification || "N/A");
                document.getElementById("doctorAvailability").textContent = "Availability: " + availability;
            }

            function closeDoctorModal() {
                document.getElementById("doctorDetailsModal").classList.add("hidden");
            }
        </script>
        <script>
            function populateTimeOptions(selectElement, minTime = null, selectedValue = null) {
                selectElement.innerHTML = "";

                const defaultOption = document.createElement("option");
                defaultOption.text = "Select Time";
                defaultOption.value = "";
                defaultOption.disabled = true;
                defaultOption.selected = !selectedValue;
                selectElement.appendChild(defaultOption);

                const start = new Date();
                start.setHours(6, 0);
                const end = new Date();
                end.setHours(23, 30);

                while (start <= end) {
                    const timeStr = start.toLocaleTimeString("en-US", {
                        hour: "numeric",
                        minute: "2-digit",
                    });

                    const currentMinutes = start.getHours() * 60 + start.getMinutes();
                    const minMinutes = minTime ? convertToMinutes(minTime) : 0;

                    if (!minTime || currentMinutes > minMinutes) {
                        const option = document.createElement("option");
                        option.value = timeStr;
                        option.text = timeStr;
                        if (selectedValue === timeStr) {
                            option.selected = true;
                        }

                        selectElement.appendChild(option);
                    }

                    start.setMinutes(start.getMinutes() + 30);
                }
            }

            function convertToMinutes(timeStr) {
                const [time, modifier] = timeStr.split(" ");
                let [hours, minutes] = time.split(":").map(Number);
                if (modifier === "PM" && hours !== 12) hours += 12;
                if (modifier === "AM" && hours === 12) hours = 0;
                return hours * 60 + minutes;
            }

            document.addEventListener("DOMContentLoaded", function () {
                const startTime = document.getElementById("startTime");
                const endTime = document.getElementById("endTime");
                const availabilityInput = document.getElementById("doctorAvailability");

                function resetTimeDropdowns() {
                    if (startTime && endTime) {
                        populateTimeOptions(startTime);
                        populateTimeOptions(endTime);
                        availabilityInput.value = "";
                    }
                }
                resetTimeDropdowns();

                const openModalBtn = document.getElementById("addDoctorBtn");
                if (openModalBtn) {
                    openModalBtn.addEventListener("click", resetTimeDropdowns);
                }

                function updateAvailability() {
                    const start = startTime.value;
                    const end = endTime.value;

                    if (start) {
                        populateTimeOptions(endTime, start, end);
                    }

                    if (start && end) {
                        availabilityInput.value = `${start} - ${end}`;
                    } else {
                        availabilityInput.value = "";
                    }
                }

                startTime.addEventListener("change", updateAvailability);
                endTime.addEventListener("change", updateAvailability);
            });
        </script>
        <script>
            const themesDropdownToggle = document.getElementById("themesDropdownToggle");
            const themesSubDropdown = document.getElementById("themesSubDropdown");
            const themesDropdownArrow = document.querySelector(".themes-dropdown-arrow");
            const lightThemeBtn = document.getElementById("lightThemeBtn");
            const darkThemeBtn = document.getElementById("darkThemeBtn");

            function applyTheme(theme) {
                if (theme === "dark") {
                    document.body.classList.add("dark");
                } else {
                    document.body.classList.remove("dark");
                }
                localStorage.setItem("theme", theme);
            }

            themesDropdownToggle.addEventListener("click", (e) => {
                e.stopPropagation();
                themesSubDropdown.classList.toggle("hidden");
                themesDropdownArrow.classList.toggle("rotate-180");
            });

            lightThemeBtn.addEventListener("click", () => {
                applyTheme("light");
                themesSubDropdown.classList.add("hidden");
                themesDropdownArrow.classList.remove("rotate-180");
            });

            darkThemeBtn.addEventListener("click", () => {
                applyTheme("dark");
                themesSubDropdown.classList.add("hidden");
                themesDropdownArrow.classList.remove("rotate-180");
            });

            document.addEventListener("click", (e) => {
                if (!themesDropdownToggle.contains(e.target) && !themesSubDropdown.contains(e.target)) {
                    themesSubDropdown.classList.add("hidden");
                    themesDropdownArrow.classList.remove("rotate-180");
                }
            });

            window.addEventListener("DOMContentLoaded", () => {
                const savedTheme = localStorage.getItem("theme") || "light";
                applyTheme(savedTheme);
            });
        </script>

        <script>
            const accentsDropdownToggle = document.getElementById("accentsDropdownToggle");
            const accentsSubDropdown = document.getElementById("accentsSubDropdown");
            const accentsDropdownArrow = document.querySelector(".accents-dropdown-arrow");
            const accentButtons = document.querySelectorAll('[id$="AccentBtn"]');

            function applyAccentColor(color) {
                document.body.classList.remove("accent-blue", "accent-green", "accent-brown", "accent-purple", "accent-orange", "accent-pink", "accent-teal");

                if (color !== "blue") {
                    document.body.classList.add(`accent-${color}`);
                }
                document.querySelectorAll(".accent-color-preview").forEach((preview) => {
                    preview.classList.remove("active");
                });

                const activeButton = document.getElementById(`${color}AccentBtn`);
                if (activeButton) {
                    const preview = activeButton.querySelector(".accent-color-preview");
                    if (preview) {
                        preview.classList.add("active");
                    }
                }
                localStorage.setItem("accent", color);
            }
            accentsDropdownToggle.addEventListener("click", (e) => {
                e.stopPropagation();
                accentsSubDropdown.classList.toggle("hidden");
                accentsDropdownArrow.classList.toggle("rotate-180");
            });
            accentButtons.forEach((button) => {
                button.addEventListener("click", () => {
                    const color = button.getAttribute("data-color");
                    applyAccentColor(color);
                    accentsSubDropdown.classList.add("hidden");
                    accentsDropdownArrow.classList.remove("rotate-180");
                });
            });
            document.addEventListener("click", (e) => {
                if (!accentsDropdownToggle.contains(e.target) && !accentsSubDropdown.contains(e.target)) {
                    accentsSubDropdown.classList.add("hidden");
                    accentsDropdownArrow.classList.remove("rotate-180");
                }
            });
            const savedAccent = localStorage.getItem("accent") || "blue";
            applyAccentColor(savedAccent);
        </script>
        <script>
            function getOrgId() {
                const urlParams = new URLSearchParams(window.location.search);
                const orgFromUrl = urlParams.get("org");

                if (orgFromUrl) {
                    localStorage.setItem("orgId", orgFromUrl);
                    return orgFromUrl;
                }
                return localStorage.getItem("orgId");
            }

            const defaultOrg = { name: "MediCare", logo: "/images/Medicare-Emblem.png" };
            const fallbackOrg = { name: "Unknown Organization", logo: "/images/fallback-logo.png" };

            const orgId = getOrgId();

            if (orgId) {
                fetch(`/api/organization/${orgId}`)
                    .then((res) => {
                        if (!res.ok) throw new Error("Not Found");
                        return res.json();
                    })
                    .then((org) => {
                        document.getElementById("orgName").textContent = org.name;
                        document.getElementById("orgLogo").src = org.logo;
                    })
                    .catch(() => {
                        document.getElementById("orgName").textContent = fallbackOrg.name;
                        document.getElementById("orgLogo").src = fallbackOrg.logo;
                    });
            } else {
                document.getElementById("orgName").textContent = defaultOrg.name;
                document.getElementById("orgLogo").src = defaultOrg.logo;
            }
        </script>
    </body>
</html>
